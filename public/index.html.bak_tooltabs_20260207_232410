<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PDFRealm</title>

    <link rel="icon" href="data:;base64,=" />
    <link rel="stylesheet" href="/styles.css" />

    <style>
      body { margin: 0; }
      main.wrap { max-width: 100%; margin: 0; }

      /* ---- Header alignment: match pricing.html (vault-style) ---- */
      .brand-left {
        display: flex;
        align-items: center;
        gap: 14px;
      }

      .brand-text {
        font-weight: 800;
        letter-spacing: 0.2px;
      }

      .brand-divider {
        width: 1px;
        align-self: stretch;
        background: var(--line);
        margin: 0 10px;
        opacity: 0.9;
      }

      .left-secure-nav {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }

      .nav-chip {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
        color: var(--text);
        border-radius: 999px;
        padding: 8px 12px;
        font-size: 0.9rem;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        cursor: default;
        opacity: 0.9;
        text-decoration: none;
        white-space: nowrap;
      }

      .nav-chip:hover { background: rgba(255, 255, 255, 0.06); }

      .nav-chip-pill {
        font-size: 0.78rem;
        color: var(--muted);
        border-radius: 999px;
        padding: 3px 8px;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.3);
      }

      .nav-chip-active {
        border-color: rgba(96, 165, 250, 0.8);
        box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.4);
        opacity: 1;
      }

      .right-nav-cluster {
        margin-left: auto;
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .top-nav {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .nav-link {
        border-radius: 999px;
        padding: 8px 14px;
        border: 1px solid transparent;
        background: transparent;
        font-size: 0.95rem;
        font-weight: 600;
        color: var(--muted);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        text-decoration: none;
      }

      .nav-link:hover { background: rgba(255, 255, 255, 0.04); color: var(--text); }

      .nav-link-active {
        border-color: var(--line);
        background: rgba(255, 255, 255, 0.04);
        color: var(--text);
      }

      .workspace-menu { position: relative; }
      .workspace-toggle { cursor: pointer; }
      .workspace-caret { font-size: 0.8rem; opacity: 0.8; }

      .workspace-dropdown {
        position: absolute;
        right: 0;
        top: 100%;
        margin-top: 8px;
        background: rgba(15, 22, 36, 0.96);
        border: 1px solid var(--line);
        border-radius: 14px;
        box-shadow: var(--shadow);
        padding: 8px;
        display: none;
        flex-direction: column;
        min-width: 280px;
        z-index: 80;
      }

      .workspace-item {
        padding: 8px 10px;
        border-radius: 10px;
        font-size: 0.92rem;
        color: var(--muted);
        text-align: left;
        border: none;
        background: transparent;
        width: 100%;
        cursor: pointer;
        text-decoration: none;
        display: block;
        white-space: nowrap;
      }

      .workspace-item:hover { background: rgba(255, 255, 255, 0.04); color: var(--text); }
      .workspace-menu.workspace-open .workspace-dropdown { display: flex; }

      @media (max-width: 980px) {
        .brand-left { flex-wrap: wrap; }
        .right-nav-cluster { gap: 10px; }
        .workspace-dropdown { right: auto; left: 0; }
      }
    
      /* ---- Sidebar tool grid (3 per row) ---- */
      .tool-tabs{
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 10px;
        overflow: auto;
      }
      .tool-tab{
  /* Uniform ‚Äútab box‚Äù sizing + centered labels */
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  white-space: normal;
  line-height: 1.15;
  min-height: 52px;
  height: 52px;
  padding: 10px 10px;
  width: 100%;
  box-sizing: border-box;

  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.10);
  background: rgba(255, 255, 255, 0.03);
  color: var(--muted);
  font-weight: 700;
  letter-spacing: 0.2px;

  overflow: hidden; /* keep long labels from changing size */
}
.tool-tab:hover{
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
}
.tool-tab-active{
  border-color: var(--line);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
}

.tool-tab[disabled],
.tool-tab[aria-disabled="true"]{
  opacity: .45;
  cursor: not-allowed;
  pointer-events: none;
}
      @media (max-width: 1100px){
        .tool-tabs{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
      }
      @media (max-width: 640px){
        .tool-tabs{ grid-template-columns: repeat(1, minmax(0, 1fr)); }
      }

      .studio-guest{ display:flex; flex-direction:column; gap:0; }
      .studio-guest .card{ border-radius: 16px; }

      /* --- Uniform quick tool previewer --- */
      .viewer-wrapper, .viewer { position: relative; min-height: 560px; }
      .viewer-wrapper iframe, .viewer iframe { width: 100%; height: 100%; border: 0; display: block; }
      .viewer-wrapper .placeholder, .viewer .placeholder { position: absolute; inset: 0; }
      .viewer-top, .viewer-head { display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
      .viewer-tools, .viewer-actions { display:flex; gap:10px; align-items:center; }

      /* --- Reorder: drag-and-drop page list --- */
      .reorder-list-head{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        margin-top:12px;
      }

      .reorder-head-actions{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
      .reorder-page-item{ touch-action: pan-y; }
      .reorder-list-head .hint{
        color: var(--muted);
        font-size: 0.92rem;
      }

      .reorder-page-list{
        margin-top:10px;
        border: 1px solid var(--line);
        background: rgba(255,255,255,0.02);
        border-radius: 14px;
        padding: 10px;
        /* Bigger list, but never forces the whole tool off-screen */
        max-height: min(520px, calc(100vh - 420px));
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        display:flex;
        flex-direction:column;
        gap:10px;
        touch-action: pan-y;
      }
      .reorder-page-item{
        display:flex;
        align-items:center;
        gap:12px;
        border: 1px solid rgba(255,255,255,0.10);
        background: rgba(255,255,255,0.03);
        border-radius: 14px;
        padding: 10px;
        cursor: grab;
        user-select:none;
      }
      .reorder-page-item:active{ cursor: grabbing; }
      .reorder-page-item.dragging{ opacity: 0.55; }
      .reorder-page-item.drop-target{ box-shadow: 0 0 0 2px rgba(96,165,250,0.55); border-color: rgba(96,165,250,0.55); }
      .reorder-drag-handle{
        width: 26px;
        height: 38px;
        border-radius: 10px;
        border: 1px solid rgba(255,255,255,0.10);
        background: rgba(0,0,0,0.25);
        display:flex;
        align-items:center;
        justify-content:center;
        color: var(--muted);
        font-weight: 800;
        letter-spacing: 1px;
        flex: 0 0 auto;
      }
      .reorder-thumb{
        width: 86px;
        height: 110px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.10);
        background: rgba(0,0,0,0.25);
        display:flex;
        align-items:center;
        justify-content:center;
        overflow:hidden;
        flex: 0 0 auto;
      }
      .reorder-thumb img{ width: 100%; height: 100%; object-fit: contain; display:block; }
      .reorder-meta{ display:flex; flex-direction:column; gap:2px; min-width: 120px; }
      .reorder-meta .title{ font-weight: 800; color: var(--text); }
      .reorder-meta .sub{ color: var(--muted); font-size: 0.92rem; }
      .reorder-list-empty{
        color: var(--muted);
        font-size: 0.95rem;
        padding: 10px;
        border: 1px dashed rgba(255,255,255,0.14);
        border-radius: 14px;
        background: rgba(255,255,255,0.015);
      }

      /* Redact interactive overlay */
      #redactBoxLayer .redact-box { position:absolute; background:#000; cursor:move; }
      #redactBoxLayer .redact-box.selected { outline:2px solid rgba(255,255,255,0.85); }
      #redactBoxLayer .redact-handle { position:absolute; width:10px; height:10px; background:#fff; border-radius:2px; }
      #redactBoxLayer .redact-handle.nw { left:-5px; top:-5px; cursor:nwse-resize; }
      #redactBoxLayer .redact-handle.ne { right:-5px; top:-5px; cursor:nesw-resize; }
      #redactBoxLayer .redact-handle.sw { left:-5px; bottom:-5px; cursor:nesw-resize; }
      #redactBoxLayer .redact-handle.se { right:-5px; bottom:-5px; cursor:nwse-resize; }

    
      /* --- Redact interactive canvas (PDF.js) --- */
      .redact-canvas-shell{position:relative;width:100%;max-width:100%;margin:0 auto;}
      .redact-canvas-shell canvas{display:block;width:100%;height:auto;}
      .redact-canvas-overlay{position:absolute;left:0;top:0;right:0;bottom:0;}
      #redactInkCanvas{position:absolute;left:0;top:0;}
      #redactBoxLayer{position:absolute;left:0;top:0;right:0;bottom:0;}
      .redact-box{position:absolute;background:#000;cursor:move;}
      .redact-box.selected{outline:2px solid rgba(255,255,255,0.85);outline-offset:-2px;}
      .redact-handle{position:absolute;width:12px;height:12px;background:#fff;border-radius:3px;box-shadow:0 1px 4px rgba(0,0,0,0.4);}
      .redact-handle.nw{left:-6px;top:-6px;cursor:nwse-resize;}
      .redact-handle.ne{right:-6px;top:-6px;cursor:nesw-resize;}
      .redact-handle.sw{left:-6px;bottom:-6px;cursor:nesw-resize;}
      .redact-handle.se{right:-6px;bottom:-6px;cursor:nwse-resize;}
      .viewer-wrapper.redact-wrap{overflow:auto;}
      .redact-toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px;}
      .redact-toolbar .btn{white-space:nowrap;}
      .redact-toolbar label{display:flex;gap:8px;align-items:center;margin:0;}
      .redact-toolbar input[type=range]{width:140px;}
      .redact-pill{padding:6px 10px;border:1px solid var(--line);border-radius:999px;color:var(--muted);font-size:0.9rem;}

      /* ---- Redact (interactive) ---- */
      .redact-toolbar { display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px; }
      .redact-toolbar .group { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
      .redact-toolbar .seg { display:flex; gap:0; overflow:hidden; border:1px solid var(--line); border-radius:12px; }
      .redact-toolbar .seg button { border-radius:0; border:0; }
      .redact-toolbar .seg button + button { border-left:1px solid var(--line); }
      .redact-toolbar .seg .active { background: rgba(255,255,255,0.09); }

      .pdf-canvas-shell { position: relative; width: 100%; margin: 0 auto; }
      .pdf-canvas-shell canvas { display:block; width:100%; height:auto; }
      .pdf-canvas-shell #redactInkCanvas,
      .pdf-canvas-shell #redactHitCanvas { position:absolute; left:0; top:0; width:100%; height:100%; }
      .pdf-canvas-shell #redactBoxLayer { position:absolute; left:0; top:0; width:100%; height:100%; }

      .redact-box { position:absolute; background:#000; cursor:move; }
      .redact-box.selected { outline: 2px dashed rgba(255,255,255,0.75); outline-offset: 2px; }
      .redact-handle { position:absolute; width:12px; height:12px; background:#fff; border-radius:3px; border:1px solid rgba(0,0,0,0.5); }
      .redact-handle.br { right:-6px; bottom:-6px; cursor: nwse-resize; }
      .redact-handle.tl { left:-6px; top:-6px; cursor: nwse-resize; }

      /* --- Quick Sign (interactive) --- */
      #qsCanvasShell{ position:relative; }
      #qsSigCanvas{ position:absolute; left:0; top:0; width:100%; height:100%; cursor:grab; }
      #qsSigCanvas:active{ cursor:grabbing; }

      /* Quick Sign: allow reaching the full tool by scrolling the left controls card */
      #qsControlsCard{
        max-height: calc(100vh - 220px);
        overflow-y: auto;
        padding-right: 10px;
        -webkit-overflow-scrolling: touch;
      }
      #qsControlsCard::-webkit-scrollbar{ width: 10px; }
      #qsControlsCard::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.12); border-radius: 10px; }

      /* Quick Sign interactive overlay */
      .pdf-canvas-shell #qsSigCanvas{position:absolute;left:0;top:0;width:100%;height:100%;touch-action:none;}
      .pdf-canvas-shell #qsPdfCanvas{position:relative;z-index:1;}
      .pdf-canvas-shell #qsSigCanvas{z-index:2;}

    
/* -------------------- PDFREALM_TOOLSET_NAV_V1 -------------------- */
/* Keep tool list visible even if JS fails to load */
.tool-tabs { opacity: 1 !important; pointer-events: auto !important; }

/* Sidebar head: restore normal block layout */
.sidebar-head { display:block; padding: 16px 16px 12px; }

/* Hide legacy tier tabs (replaced by header toolset tabs) */
.tier-tabs { display:none !important; }

/* Amazon-style toolset tabs in the header */
.toolset-bar{
  border-top: 1px solid rgba(255,255,255,0.10);
  border-bottom: 1px solid rgba(255,255,255,0.12);
  background: rgba(15,23,42,.86);
  padding: 0 16px;
}
.toolset-tabs{
  display:flex;
  gap: 6px;
  align-items:flex-end;
  padding-top: 10px;
  overflow-x:auto;
  scrollbar-width: none;
}
.toolset-tabs::-webkit-scrollbar{ height: 0; }
.toolset-tab{ position:relative; }
.toolset-btn{
  appearance:none;
  border:1px solid rgba(255,255,255,0.16);
  border-bottom:none;
  background: rgba(255,255,255,0.05);
  color: rgba(255,255,255,0.88);
  border-radius: 14px 14px 0 0;
  padding: 10px 14px 9px;
  font-size: 13px;
  font-weight: 800;
  letter-spacing: 0.2px;
  cursor:pointer;
}
.toolset-tab:hover .toolset-btn,
.toolset-tab.open .toolset-btn,
.toolset-btn.active{
  background: rgba(255,255,255,0.09);
  color: var(--text);
  border-color: rgba(255,255,255,0.28);
}
.toolset-menu{
  position:absolute;
  top: 100%;
  left: 0;
  margin-top: -1px;
  background: rgba(10,16,28,0.98);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 0 14px 14px 14px;
  box-shadow: var(--shadow);
  padding: 10px;
  min-width: 320px;
  max-width: min(760px, calc(100vw - 32px));
  max-height: min(70vh, 520px);
  overflow:auto;
  display:none;
  z-index: 200;
}
.toolset-tab:hover .toolset-menu,
.toolset-tab.open .toolset-menu{ display:block; }

.toolset-menu-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}
@media (min-width: 1200px){
  .toolset-menu-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (max-width: 760px){
  .toolset-menu{ min-width: 260px; }
  .toolset-menu-grid{ grid-template-columns: 1fr; }
}
.toolset-item{
  appearance:none;
  width: 100%;
  text-align:left;
  border: 1px solid transparent;
  background: transparent;
  color: rgba(255,255,255,0.90);
  padding: 8px 10px;
  border-radius: 10px;
  cursor:pointer;
  font-size: 13px;
  font-weight: 650;
  line-height: 1.15;
}
.toolset-item:hover{
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.12);
}
.toolset-item[aria-disabled="true"]{
  opacity: 0.55;
  cursor: not-allowed;
}
/* ------------------ /PDFREALM_TOOLSET_NAV_V1 ------------------ */


      /* PDFREALM_EXCEPTIONAL_UX_PACK_V1 */
      .page-strip {
        display:flex;
        gap:10px;
        overflow:auto;
        padding:10px;
        border:1px solid var(--line);
        border-radius:14px;
        background: rgba(255,255,255,0.03);
      }
      .page-thumb {
        width:84px;
        flex: 0 0 auto;
        border:1px solid rgba(255,255,255,0.10);
        border-radius:12px;
        padding:8px;
        background: rgba(0,0,0,0.20);
        cursor:pointer;
        user-select:none;
        transition: transform .08s ease;
      }
      .page-thumb:hover { transform: translateY(-1px); }
      .page-thumb.selected { outline:2px solid rgba(120,180,255,0.85); outline-offset: 1px; }
      .page-thumb img { width:100%; height:auto; display:block; border-radius:8px; }
      .page-thumb .pnum { font-size:12px; opacity:.85; margin-top:6px; text-align:center; }

      .mini-actions { display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
      .mini-actions .btn { padding:8px 10px; font-size: 0.9rem; }

      .outputs-preview {
        margin-top:10px;
        border:1px solid var(--line);
        border-radius:14px;
        padding:10px;
        background: rgba(255,255,255,0.02);
      }
      .outputs-preview .row {
        display:flex; justify-content:space-between; gap:10px;
        padding:6px 4px; border-bottom:1px solid rgba(255,255,255,0.06);
        font-size: 0.95rem;
      }
      .outputs-preview .row:last-child { border-bottom:none; }
      .outputs-preview .muted { opacity: .8; font-size: 0.9rem; }

      .zip-contents {
        max-height: 280px;
        overflow:auto;
        border:1px solid var(--line);
        border-radius:14px;
        padding:10px;
        background: rgba(255,255,255,0.02);
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 12px;
        line-height: 1.45;
      }
  
</style>
  

<style id="PDFREALM_SIDEBAR_TOOLTABS_3COL_V10">
/* PDFREALM_SIDEBAR_TOOLTABS_3COL_V12
   Restore original Tools layout:
     - Sidebar LEFT, Tool view RIGHT
     - Sidebar tabs 3 across, readable, scrollable
*/
main.wrap.wrap-tools{
  display: grid !important;
  grid-template-columns: 520px minmax(0, 1fr) !important;
  gap: 18px !important;
  align-items: start !important;
}

main.wrap.wrap-tools > aside.panel.sidebar{
  width: 520px !important;
  min-width: 520px !important;
  max-width: 520px !important;
  position: relative !important;
  z-index: 1 !important;
}
main.wrap.wrap-tools > section.panel.main{
  min-width: 0 !important;
  position: relative !important;
  z-index: 0 !important;
}

/* Sidebar tab grid */
aside.panel.sidebar .tool-tabs{
  display: grid !important;
  grid-template-columns: repeat(3, minmax(150px, 1fr)) !important;
  gap: 12px !important;
  padding: 12px !important;
  width: 100% !important;
  box-sizing: border-box !important;

  /* keep this as the "one scrolling tool view" */
  max-height: calc(100vh - 210px) !important;
  overflow: auto !important;
}

/* Tabs: remove fixed height, allow wrapping, bigger click targets */
aside.panel.sidebar .tool-tabs .tool-tab{
  height: auto !important;
  min-height: 56px !important;
  padding: 12px 12px !important;
  font-size: 14px !important;
  line-height: 1.15 !important;

  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;

  white-space: normal !important;
  word-break: break-word !important;
}

/* responsive: stack on smaller screens */
@media (max-width: 1100px){
  main.wrap.wrap-tools{
    grid-template-columns: 1fr !important;
  }
  main.wrap.wrap-tools > aside.panel.sidebar{
    width: auto !important;
    min-width: 0 !important;
    max-width: none !important;
  }
  aside.panel.sidebar .tool-tabs{
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    max-height: none !important;
  }
}
@media (max-width: 680px){
  aside.panel.sidebar .tool-tabs{
    grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
  }
}
</style>
</head>

  <body data-tier-ready="1">
    <!-- HEADER (match pricing.html style) -->
    <header class="topbar">
      <div class="topbar-inner">
        <!-- LEFT: Brand + Secure tabs -->
        <div class="brand-left">
          <div class="brand">
            <div class="logo"></div>
            <div class="brand-text">PDFRealm</div>
          </div>

          <div class="brand-divider"></div>

          <nav class="left-secure-nav" aria-label="Secure">
                                    
            <a href="/?ai=1" class="nav-chip" id="aiOperatorNav" data-ai-nav="1">
              AI Operator
              <span class="nav-chip-pill">BETA</span>
            </a>
<a href="/vault.html" class="nav-chip">
              Secure Vault
              <span class="nav-chip-pill">AES-256</span>
            </a>
            <a href="/office.html" class="nav-chip">
              DocForge
              <span class="nav-chip-pill">PDFStudio + Office Suite</span>
            </a>
            <a href="/" class="nav-chip nav-chip-active">Quick Tools</a>
          </nav>
        </div>

        <!-- RIGHT: Tools + Industry Packs + Pricing + Account -->
        <div class="right-nav-cluster">
          <nav class="top-nav" aria-label="Primary">
<div class="workspace-menu" id="industryMenuWrap">
              <button class="nav-link workspace-toggle" type="button" id="industryToggle">
                Industry Packs
                <span class="workspace-caret">‚ñæ</span>
              </button>
              <div class="workspace-dropdown" id="industryDropdown" role="menu" aria-label="Industry Packs">
                <a class="workspace-item" role="menuitem" href="/broker.html">Broker TMS Dashboard</a>
                <a class="workspace-item" role="menuitem" href="/carrier.html">Carrier Dashboard</a>
                <div style="height:1px; background: rgba(255,255,255,0.10); margin: 8px 10px;"></div>
                <a class="workspace-item" role="menuitem" href="/legal.html">Legal Workspace</a>
                <a class="workspace-item" role="menuitem" href="/real-estate.html">Real Estate Dashboard</a>
                <a class="workspace-item" role="menuitem" href="/accounting.html">Accounting Dashboard</a>
                <a class="workspace-item" role="menuitem" href="/hr.html">HR Dashboard</a>
                <a class="workspace-item" role="menuitem" href="/marketing.html">Marketing Dashboard</a>
                <a class="workspace-item" role="menuitem" href="/csuite.html">C-Suite Dashboard</a>
              </div>
            </div>

            <a href="/pricing.html" class="nav-link">Pricing</a>
          </nav>

          <div class="top-actions">
            <button
              id="accountLoginBtn"
              class="btn"
              type="button"
              aria-haspopup="dialog"
              aria-controls="accountModal"
            >
              <span id="accountDot" class="dot"></span>
              Account
            </button>
          </div>
        </div>
      </div>
    
      <!-- Amazon-style Tool Suite tabs (hover to open) -->
      <div class="toolset-bar">
        <nav class="toolset-tabs" id="toolsetTabs" aria-label="Tool Suites">
          <div class="toolset-tab" data-toolset="standard">
            <button class="toolset-btn" type="button" aria-haspopup="menu" aria-expanded="false">Standard Tools</button>
            <div class="toolset-menu" role="menu" aria-label="Standard Tools"></div>
          </div>
          <div class="toolset-tab" data-toolset="premium">
            <button class="toolset-btn" type="button" aria-haspopup="menu" aria-expanded="false">Premium Tools</button>
            <div class="toolset-menu" role="menu" aria-label="Premium Tools"></div>
          </div>
          <div class="toolset-tab" data-toolset="secure">
            <button class="toolset-btn" type="button" aria-haspopup="menu" aria-expanded="false">Secure Suite</button>
            <div class="toolset-menu" role="menu" aria-label="Secure Suite"></div>
          </div>
          <div class="toolset-tab" data-toolset="governance">
            <button class="toolset-btn" type="button" aria-haspopup="menu" aria-expanded="false">Document Governance</button>
            <div class="toolset-menu" role="menu" aria-label="Document Governance"></div>
          </div>
        

          <div class="toolset-tab" data-toolset="breakthrough">
            <button class="toolset-btn" type="button" aria-haspopup="menu" aria-expanded="false">Breakthrough</button>
            <div class="toolset-menu" role="menu" aria-label="Breakthrough"></div>
          </div>
</nav>
      </div>
</header>

    <!-- MAIN LAYOUT (TOOLS MODE) -->
    <main class="wrap wrap-tools">

<!-- Sidebar -->
      <aside class="panel sidebar">
        <div class="sidebar-head">
          <div class="title">Tools</div>
          <div class="sub">Use the tabs above to browse tool suites, or pick any tool below.</div>
        </div>

        <!-- Left-side tool tabs -->
                <div class="tool-tabs" role="tablist" aria-label="PDFRealm Tools">

          <button class="tool-tab tool-tab-active" type="button" data-tool="studio" role="tab" aria-selected="true">PDF Studio</button>
          <button class="tool-tab" type="button" data-tool="rasterize" role="tab" aria-selected="false">Rasterize</button>
          <button class="tool-tab" type="button" data-tool="compress" role="tab" aria-selected="false">Compress</button>
          <button class="tool-tab" type="button" data-tool="embedvideo" role="tab" aria-selected="false">Embed Video</button>
          <button class="tool-tab" type="button" data-tool="embedaudio" role="tab" aria-selected="false">Embed Audio</button>
          <button class="tool-tab" type="button" data-tool="embedimage" role="tab" aria-selected="false">Embed Image</button>
<button class="tool-tab" type="button" data-tool="merge" role="tab" aria-selected="false">Merge</button>
          <button class="tool-tab" type="button" data-tool="split" role="tab" aria-selected="false">Split / Extract</button>
          <button class="tool-tab" type="button" data-tool="pageszip" role="tab" aria-selected="false">Pages ‚Üí ZIP</button>
          <button class="tool-tab" type="button" data-tool="metasanitize" role="tab" aria-selected="false">Sanitize</button>

<button class="tool-tab" type="button" data-tool="reorder" role="tab" aria-selected="false">Reorder</button>
          <button class="tool-tab" type="button" data-tool="rotate" role="tab" aria-selected="false">Rotate</button>
          <button class="tool-tab" type="button" data-tool="delete" role="tab" aria-selected="false">Delete Pages</button>

<button class="tool-tab" type="button" data-tool="watermark" role="tab" aria-selected="false">Watermark</button>
          <button class="tool-tab" type="button" data-tool="pagenums" role="tab" aria-selected="false">Bates/Numbering</button>
          <button class="tool-tab" type="button" data-tool="stamp" role="tab" aria-selected="false">Timestamp</button>
          <button class="tool-tab" type="button" data-tool="repair" role="tab" aria-selected="false">Repair PDF</button>
          <button class="tool-tab" type="button" data-tool="compare" role="tab" aria-selected="false">Compare</button>
          <button class="tool-tab" type="button" data-tool="blank" role="tab" aria-selected="false">Remove Blanks</button>
          <button class="tool-tab" type="button" data-tool="extracttext" role="tab" aria-selected="false">Extract Text</button>
          <button class="tool-tab" type="button" data-tool="resize" role="tab" aria-selected="false">Resize Pages</button>          <button class="tool-tab" type="button" data-tool="redact" role="tab" aria-selected="false">Redact</button>
          <button class="tool-tab" type="button" data-tool="flatten" role="tab" aria-selected="false">Flatten</button>
          <button class="tool-tab" type="button" data-tool="metadata" role="tab" aria-selected="false">Metadata</button>
          <button class="tool-tab" type="button" data-tool="password" role="tab" aria-selected="false">Encrypt</button>
          <button class="tool-tab" type="button" data-tool="quick" role="tab" aria-selected="false">Quick Sign</button>
          <button class="tool-tab" type="button" data-tool="ocr" role="tab" aria-selected="false">OCR</button>
<button class="tool-tab" type="button" data-tool="secure_send" role="tab" aria-selected="false">Secure Send</button>
<button class="tool-tab" type="button" data-tool="secure_chat" role="tab" aria-selected="false">Secure Chat</button>
<button class="tool-tab" type="button" data-tool="secure_video" role="tab" aria-selected="false">Secure Video Chat</button>
<button class="tool-tab" type="button" data-tool="secure_voip" role="tab" aria-selected="false">Secure VoIP</button>
<button class="tool-tab" type="button" data-tool="secure_containers" role="tab" aria-selected="false">Encrypted Containers</button>
<button class="tool-tab" type="button" data-tool="docgov" role="tab" aria-selected="false">Document Governance</button>

<button class="tool-tab" type="button" data-tool="breakthrough" role="tab" aria-selected="false">üöÄ Breakthrough</button>

<!-- PDFREALM_PREMIUM_EMBED_MEDIA_INDEX_V1: tool tabs (premium, top) -->

<button class="tool-tab" type="button" data-tool="word2pdf" role="tab" aria-selected="false">Word ‚Üí PDF</button>

<button class="tool-tab" type="button" data-tool="html2pdf" role="tab" aria-selected="false">HTML ‚Üí PDF</button>
<button class="tool-tab" type="button" data-tool="url2pdf" role="tab" aria-selected="false">URL ‚Üí PDF</button>
<button class="tool-tab" type="button" data-tool="json2pdf" role="tab" aria-selected="false">JSON ‚Üí PDF</button>
<button class="tool-tab" type="button" data-tool="md2pdf" role="tab" aria-selected="false">Markdown ‚Üí PDF</button>
<button class="tool-tab" type="button" data-tool="csv2pdf" role="tab" aria-selected="false">CSV ‚Üí PDF</button>
<button class="tool-tab" type="button" data-tool="txt2pdf" role="tab" aria-selected="false">Text ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="code2pdf" role="tab" aria-selected="false">Code ‚Üí PDF</button>
<button class="tool-tab" type="button" data-tool="jpg2pdf" role="tab" aria-selected="false">JPG ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="png2pdf" role="tab" aria-selected="false">PNG ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="tiff2pdf" role="tab" aria-selected="false">TIFF ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="svg2pdf" role="tab" aria-selected="false">SVG ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="pdf2word" role="tab" aria-selected="false">PDF ‚Üí Word</button>
          <button class="tool-tab" type="button" data-tool="pdf2jpg" role="tab" aria-selected="false">PDF ‚Üí JPG</button>
          <button class="tool-tab" type="button" data-tool="pdf2png" role="tab" aria-selected="false">PDF ‚Üí PNG</button>
          <button class="tool-tab" type="button" data-tool="jpg2png" role="tab" aria-selected="false">JPG ‚Üí PNG</button>
          <button class="tool-tab" type="button" data-tool="png2jpg" role="tab" aria-selected="false">PNG ‚Üí JPG</button>
          <button class="tool-tab" type="button" data-tool="docx2png" role="tab" aria-selected="false">DOCX ‚Üí PNG</button>
        
          <button class="tool-tab" type="button" data-tool="xml2pdf" role="tab" aria-selected="false">XML ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="pdf2md" role="tab" aria-selected="false">PDF ‚Üí MD</button>
          <button class="tool-tab" type="button" data-tool="pdf2html" role="tab" aria-selected="false">PDF ‚Üí HTML</button>
          <button class="tool-tab" type="button" data-tool="pdf2json" role="tab" aria-selected="false">PDF ‚Üí JSON</button>
          <button class="tool-tab" type="button" data-tool="extractimgzip" role="tab" aria-selected="false">Extract Images ZIP</button>

          <button class="tool-tab" type="button" data-tool="eml2pdf" role="tab" aria-selected="false">EML ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="heic2pdf" role="tab" aria-selected="false">HEIC ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="zip2pdf" role="tab" aria-selected="false">ZIP ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="pdf2csv" role="tab" aria-selected="false">PDF ‚Üí CSV</button>
          <button class="tool-tab" type="button" data-tool="pdf2txt" role="tab" aria-selected="false">PDF ‚Üí TXT</button>

          <button class="tool-tab" type="button" data-tool="smartcompress" role="tab" aria-selected="false">Smart Compress</button>
          <button class="tool-tab" type="button" data-tool="deskewclean" role="tab" aria-selected="false">Deskew + Clean</button>
          <button class="tool-tab" type="button" data-tool="pdf2pptx" role="tab" aria-selected="false">PDF ‚Üí PPTX</button>
          <button class="tool-tab" type="button" data-tool="extractembedded" role="tab" aria-selected="false">Extract Embedded Images</button>
          <button class="tool-tab" type="button" data-tool="visualdiff" role="tab" aria-selected="false">Visual Diff</button>
          <button class="tool-tab" type="button" data-tool="templaterun" role="tab" aria-selected="false">Template Runner</button>
          <button class="tool-tab" type="button" data-tool="batchrename" role="tab" aria-selected="false">Batch Rename</button>
          <button class="tool-tab" type="button" data-tool="extractattach" role="tab" aria-selected="false">Extract Attachments</button>
          <button class="tool-tab" type="button" data-tool="extractfonts" role="tab" aria-selected="false">Extract Fonts</button>
          <button class="tool-tab" type="button" data-tool="pdf2epub" role="tab" aria-selected="false">PDF ‚Üí EPUB</button>
          <button class="tool-tab" type="button" data-tool="epub2pdf" role="tab" aria-selected="false">EPUB ‚Üí PDF</button>
          <button class="tool-tab" type="button" data-tool="qrbarcode" role="tab" aria-selected="false">QR / Barcode</button>
          <button class="tool-tab" type="button" data-tool="bulkqrbarcode" role="tab" aria-selected="false">Bulk QR ‚Üí ZIP</button>
          <button class="tool-tab" type="button" data-tool="webhooksend" role="tab" aria-selected="false">Webhook Send</button>
          <button class="tool-tab" type="button" data-tool="pdfperms" role="tab" aria-selected="false">PDF Perms</button>
          <button class="tool-tab" type="button" data-tool="pdf2xlsx" role="tab" aria-selected="false">PDF ‚Üí XLSX</button>
          <button class="tool-tab" type="button" data-tool="pdfcrop" role="tab" aria-selected="false">Crop PDF</button>
          <button class="tool-tab" type="button" data-tool="datestamp" role="tab" aria-selected="false">Date Stamp</button>
          <button class="tool-tab" type="button" data-tool="tableextract" role="tab" aria-selected="false">Table Extract</button>
          <button class="tool-tab" type="button" data-tool="chainrunner" role="tab" aria-selected="false">Chain Runner</button>
          <button class="tool-tab" type="button" data-tool="watermarktext" role="tab" aria-selected="false">Watermark (Text)</button>
          <button class="tool-tab" type="button" data-tool="watermarkimage" role="tab" aria-selected="false">Watermark (Image)</button>
          <button class="tool-tab" type="button" data-tool="headerfooter" role="tab" aria-selected="false">Header / Footer</button>
          <button class="tool-tab" type="button" data-tool="rotate90" role="tab" aria-selected="false">Rotate 90¬∞</button>
          <button class="tool-tab" type="button" data-tool="flattenforms" role="tab" aria-selected="false">Flatten Forms</button>
          <button class="tool-tab" type="button" data-tool="pdfflatten" role="tab" aria-selected="false">Flatten Forms</button>
          <button class="tool-tab" type="button" data-tool="pdf2layoutjson" role="tab" aria-selected="false">PDF ‚Üí Layout JSON</button>
          <button class="tool-tab" type="button" data-tool="qrstamp" role="tab" aria-selected="false">Add QR Code</button>
          <button class="tool-tab" type="button" data-tool="barcodestamp" role="tab" aria-selected="false">Add Barcode</button>
          <button class="tool-tab" type="button" data-tool="pdf2outline" role="tab" aria-selected="false">PDF ‚Üí Outline</button>
</div>
      
          
          
          
          
          

          
          
          
          
          

          
          
          
          
          

          
          
          
          
          

          
          
          
          
          

          
          
          
          
          
</aside>

      <!-- Main -->
      <section class="panel main">

        <!-- PDF Studio -->
        <div class="tool-view tool-view-active" data-tool-view="studio">
          <div class="tool-header">
            <div>
              <h2>PDF Studio</h2>
              <p>Upload a PDF, place overlays (signature/note), drag to fine-tune, then export.</p>
            </div>
          </div>

          <div class="tool-body">
<div class="studio-guest">
  <div class="card" style="margin:0 0 0 0;">
    <div class="studio-toolbar" style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
      <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
        <button id="psHostUploadBtn" class="btn btn-secondary" type="button">Upload PDF</button>
        <input id="psHostUploadInput" type="file" accept="application/pdf" style="display:none;" />

        <button id="psHostAddBtn" class="btn btn-secondary" type="button">Add PDFs</button>
        <input id="psHostAddInput" type="file" accept="application/pdf" multiple style="display:none;" />
      </div>

      <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
        <button id="psHostExportBtn" class="btn btn-primary" type="button">Export PDF</button>
        <span id="psHostStatus" class="pill">Status: Ready</span>
      </div>
    </div>
  </div>

  <div class="card viewer-card" style="padding:0; margin:0; overflow:hidden;">
    <iframe id="psGuestFrame" title="PDF Studio" src="/pdfstudio.html" style="width:100%; height:980px; border:0;"></iframe>
  </div>
</div>

<div class="legacy-studio" style="display:none;">

            <div class="grid2">
              <div class="card">
                <label for="studioFile">PDF file</label>
                <input id="studioFile" type="file" accept="application/pdf" />

                <label for="studioSignatureName">Signature text</label>
                <input id="studioSignatureName" type="text" placeholder="e.g., John Smith" />

                <label for="studioNoteText">Optional note</label>
                <input id="studioNoteText" type="text" placeholder="e.g., Approved / Date / Initials" />

                <div class="tool-actions">
                  <button id="studioAddSignatureBtn" class="btn btn-secondary" type="button">Place Signature</button>
                  <button id="studioAddTextBtn" class="btn btn-secondary" type="button">Place Note</button>
                  <button id="studioExportBtn" class="btn btn-primary" type="button">Export edited PDF</button>
                </div>
                <div id="watermarkPreviewHint" class="muted" style="margin-top:10px;display:none;">Preview updated. Change text and click Preview again to refresh.</div>

                <div id="studioStatus" class="kpi" style="margin-top:12px;">
                  <span class="pill">Status: Ready</span>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="studioFrame">Pop-out</button>
                  </div>
                </div>

                <div id="studioViewerWrapper" class="viewer-wrapper">
                  <div id="studioPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="studioFrame" title="PDF Studio Preview"></iframe>

                  <div id="studioClickLayer" class="click-layer" aria-hidden="true"></div>

                  <div id="studioSignatureOverlay" class="signature-overlay" style="display:none; left:18px; top:18px;">
                    <b id="studioSignatureText">Signature</b>
                  </div>
                  <div id="studioNoteOverlay" class="signature-overlay" style="display:none; left:18px; top:90px;">
                    <b id="studioNoteText">Note</b>
                  </div>
                </div>
              </div>
            </div>
          
            </div>
          </div>
        </div>

        
        <!-- Quick Sign -->
        <div class="tool-view" data-tool-view="quick">
          <div class="tool-header">
            <div>
              <h2>Quick Sign</h2>
              <p>Upload a PDF, place a realistic signature, preview it, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card" id="qsControlsCard">
                <label for="qsFile">PDF files</label>
                <input id="qsFile" type="file" accept="application/pdf" multiple />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="qsPassword">Password (if encrypted)</label>
                    <input id="qsPassword" type="password" placeholder="Password for this PDF" autocomplete="off" />
                  </div>
                  <div>
                    <button id="qsUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <div class="redact-toolbar" style="margin-top:14px;">
                  <div class="group" style="width:100%;justify-content:space-between;gap:10px;">
                    <div class="seg" aria-label="Signature source">
                      <button id="qsSigModeGenerate" class="btn btn-secondary active" type="button">Generate</button>
                      <button id="qsSigModeDraw" class="btn btn-secondary" type="button">Draw</button>
                      <button id="qsSigModeUpload" class="btn btn-secondary" type="button">Upload</button>
                    </div>
                    <div class="group" style="gap:8px;">
                      <label style="gap:8px;">
                        Size
                        <input id="qsSigScale" type="range" min="8" max="50" value="20" />
                      </label>
                    </div>
                  </div>

                  <div id="qsSigDrawPanel" style="width:100%;display:none;">
                    <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;">
                      <div class="redact-pill">Draw your signature below (black ink)</div>
                      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                        <label style="gap:8px;">Pen <input id="qsSigPenSize" type="range" min="2" max="10" value="4" /></label>
                        <button id="qsSigClearBtn" class="btn btn-secondary" type="button">Clear</button>
                      </div>
                    </div>
                    <div style="margin-top:10px;border:1px solid rgba(255,255,255,0.12);border-radius:14px;overflow:hidden;background:rgba(0,0,0,0.22);">
                      <canvas id="qsSigPad" width="900" height="260" style="display:block;width:100%;height:auto;touch-action:none;"></canvas>
                    </div>
                  </div>

                  <div id="qsSigUploadPanel" style="width:100%;display:none;">
                    <div class="redact-pill">Upload a signature image (PNG recommended).</div>
                    <div style="margin-top:8px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                      <input id="qsSigUpload" type="file" accept="image/*" style="max-width:190px;font-size:0.86rem;" />
                      <span class="hint" style="margin:0;opacity:0.9;">Tip: Transparent PNG works best.</span>
                    </div>
                  </div>

                  <div id="qsSigGeneratePanel" style="width:100%;">
                    <div style="margin-top:10px;display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;">
                      <div style="flex:1;min-width:220px;">
                        <label for="qsSigGenName">Name</label>
                        <input id="qsSigGenName" type="text" placeholder="e.g., John Smith" />
                      </div>
                      <div>
                        <button id="qsSigGenerateBtn" class="btn btn-secondary" type="button">Create Signature</button>
                      </div>
                    </div>
                  </div>
                  <div style="width:100%;margin-top:8px;">
                    <div style="margin-top:6px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                      <label style="gap:8px;display:flex;align-items:center;">
                        <input id="qsInitEnable" type="checkbox" />
                        Add initials
                      </label>
                      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                        <input id="qsInitText" type="text" placeholder="JS" maxlength="6" style="width:70px;max-width:70px;padding:6px 10px;font-size:0.9rem;" />
                        <button id="qsInitCreateBtn" class="btn btn-secondary" type="button">Create Initials</button>
                      </div>
                    </div>

                    <div style="margin-top:6px;display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;">
                      <label style="gap:8px;display:flex;align-items:center;">
                        Size
                        <input id="qsInitScale" type="range" min="0.5" max="25" step="0.5" value="10" />
                      </label></div>
                  </div>
<div style="width:100%;margin-top:12px;display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;">
                    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                      <div class="seg" aria-label="Active item">
                        <button id="qsActiveSigBtn" class="btn btn-secondary active" type="button">Signature</button>
                        <button id="qsActiveInitBtn" class="btn btn-secondary" type="button">Initials</button>
                      </div>
                      <button id="qsLockSigBtn" class="btn btn-secondary" type="button">Lock Signature</button>
                      <button id="qsLockInitBtn" class="btn btn-secondary" type="button">Lock Initials</button>
                      <button id="qsLockNextBtn" class="btn btn-secondary" type="button">Lock &amp; Next Page</button>
                    </div>
                  </div>

                  <div style="width:100%;margin-top:8px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                    <button id="qsAddSigBtn" class="btn btn-secondary" type="button">Add Signature</button>
                    <button id="qsAddInitBtn" class="btn btn-secondary" type="button">Add Initials</button>
                    <span class="hint" style="margin:0;opacity:0.9;">Add as many as needed (same page). Lock one, then add another.</span>
                  </div>

                  <div style="width:100%;margin-top:10px;display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;">
                    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                      <button id="qsPrevPageBtn" class="btn btn-secondary" type="button">Prev</button>
                      <span id="qsPageLabel" class="redact-pill">Page 1 / 1</span>
                      <button id="qsNextPageBtn" class="btn btn-secondary" type="button">Next</button>
                    </div>
                    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;"><button id="qsApplyBtn" class="btn btn-primary" type="button">Export signed PDF</button>
                    </div>
                  </div>
                </div>

                <div id="qsStatus" class="kpi" style="margin-top:10px;">
                  <span class="pill">Status: Ready</span>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools"></div>
                </div>
                <div id="qsViewerWrapper" class="viewer-wrapper" style="overflow:auto;">
                  <div id="qsQuickPlaceholder" class="placeholder">Upload a PDF to preview it here. If it's encrypted, enter the password and click Decrypt / Unlock.</div>

                  <div id="qsCanvasShell" class="pdf-canvas-shell" style="display:none; padding:12px;">
                    <canvas id="qsPdfCanvas"></canvas>
                    <canvas id="qsSigCanvas"></canvas>
                  </div>

                  <div id="qsPreviewHint" class="hint" style="display:none; margin: 10px 12px 0 12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Password -->
        <div class="tool-view" data-tool-view="password">
          <div class="tool-header">
            <div>
              <h2>Password Protect <span style="font-size:0.85em; font-weight:500;">(AES-256)</span></h2>
              <p>Protect a PDF with a password using <b>AES-256 encryption</b>.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="passwordPdfFile">PDF file</label>
                <input id="passwordPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="passwordCurrentInput">Current password (if already encrypted)</label>
                    <input id="passwordCurrentInput" type="password" placeholder="Only needed if this PDF is already protected" autocomplete="off" />
                  </div>
                  <div>
                    <button id="passwordUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="passwordInput">New password</label>
                <input id="passwordInput" type="password" placeholder="Enter a password" />

                <div class="tool-actions">
                  <button id="passwordEncryptBtn" class="btn btn-primary" type="button">Password Protect</button>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="passwordPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="passwordPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here. If it's encrypted, enter the current password and click Decrypt / Unlock.</div>
                  <iframe id="passwordPreviewFrame" title="Password Preview" style="height:calc(100% + 64px); margin-top:-64px;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Merge -->
        <div class="tool-view" data-tool-view="merge">
          <div class="tool-header">
            <div>
              <h2>Merge PDFs</h2>
              <p>Select two PDFs to combine into one. Preview shows both PDFs side-by-side. If a PDF is password-protected, use <b>Decrypt / Unlock</b> first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="mergeFile1">Top PDF</label>
                <input id="mergeFile1" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="mergePassword1">Password (if encrypted)</label>
                    <input id="mergePassword1" type="password" placeholder="Password for Top PDF" autocomplete="off" />
                  </div>
                  <div>
                    <button id="mergeUnlock1Btn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="mergeFile2">Bottom PDF (optional)</label>
                <input id="mergeFile2" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="mergePassword2">Password (if encrypted)</label>
                    <input id="mergePassword2" type="password" placeholder="Password for Bottom PDF" autocomplete="off" />
                  </div>
                  <div>
                    <button id="mergeUnlock2Btn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <div class="tool-actions">
                  <button id="mergePdfBtn" class="btn btn-primary" type="button">Merge &amp; export</button>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview (both PDFs)</div>
</div>
                <div class="viewer-wrapper">
                  <div id="mergePreviewPlaceholder" class="placeholder">Select PDFs to preview them together.</div>
                  <iframe id="mergePreviewFrame" title="Merge Preview"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Delete -->
        <div class="tool-view" data-tool-view="delete">
          <div class="tool-header">
            <div>
              <h2>Delete Pages</h2>
              <p>Delete pages from a PDF (e.g., <b>2,4-6</b>). Encrypted PDFs require Decrypt / Unlock.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="deletePdfFile">PDF file</label>
                <input id="deletePdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="deletePdfPassword">Password (if encrypted)</label>
                    <input id="deletePdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="deleteUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="deletePagesSpec" style="margin-top:10px;">Pages to delete</label>
                <input id="deletePagesSpec" type="text" placeholder="e.g., 2,4-6" />

                <div class="tool-actions" style="margin-top:12px;">
                  <button id="deletePagesBtn" class="btn btn-primary" type="button">Delete pages &amp; export</button>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;">
                  <div class="viewer-title">Preview</div>
                  <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:flex-end;">
                    <div style="display:flex;gap:8px;align-items:center;">
                      <button id="deletePrevPageBtn" class="btn btn-secondary" type="button">Prev</button>
                      <input id="deletePreviewPage" type="number" value="1" min="1" style="width:80px;" />
                      <div style="color:var(--muted);font-size:0.95rem;">/ <span id="deletePageCount">?</span></div>
                      <button id="deleteNextPageBtn" class="btn btn-secondary" type="button">Next</button>
                    </div>
                    <div style="display:flex;gap:8px;align-items:center;">
                      <div style="color:var(--muted);font-size:0.95rem;">Zoom</div>
                      <input id="deleteZoom" type="range" min="50" max="200" value="110" step="5" style="width:160px;" />
                      <div id="deleteZoomLabel" style="color:var(--muted);font-size:0.95rem;min-width:56px;text-align:right;">110%</div>
                    </div>
                  </div>
                </div>

                <div class="viewer-wrapper" style="overflow:auto;">
                  <div id="deletePreviewPlaceholder" class="placeholder">Upload a PDF to preview. If it's encrypted, enter the password then click Decrypt / Unlock.</div>
                  <div id="deletePreviewStage" style="display:none;padding:6px;">
                    <div id="deletePreviewInner" style="position:relative;margin:0 auto;">
                      <img id="deletePreviewImg" alt="Delete pages preview" style="position:absolute;left:50%;top:50%;transform-origin:center center;display:block;max-width:none;max-height:none;" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Split -->
        <div class="tool-view" data-tool-view="split">
          <div class="tool-header">
            <div>
              <h2>Split / Extract Pages</h2>
              <p>Extract a range (e.g., <b>1-3,5</b>) into a new PDF. If the PDF is password-protected, use <b>Decrypt / Unlock</b> first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="splitPdfFile">PDF file</label>
                <input id="splitPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="splitPdfPassword">Password (if encrypted)</label>
                    <input id="splitPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="splitUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="splitPageRanges">Ranges (e.g., 1-3,5)</label>
                <input id="splitPageRanges" type="text" placeholder="1-3,5" />

                <div style="margin-top:10px;">
                  <label for="splitOutputMode">Output mode</label>
                  <select id="splitOutputMode">
                    <option value="single" selected>Single PDF (extract selection/ranges)</option>
                    <option value="zip_pages">ZIP (one PDF per selected page)</option>
                    <option value="zip_chunks">ZIP (one PDF per chunk; separate chunks with ‚Äú;‚Äù)</option>
                  </select>
                  <div class="hint" style="margin-top:6px;">Tip: Use the page strip to select pages. It will auto-fill the ranges box.</div>
                </div>

                <div class="mini-actions">
                  <button id="splitSelectAllBtn" class="btn btn-secondary" type="button">Select all</button>
                  <button id="splitClearSelBtn" class="btn btn-secondary" type="button">Clear</button>
                  <button id="splitSelectOddsBtn" class="btn btn-secondary" type="button">Odds</button>
                  <button id="splitSelectEvensBtn" class="btn btn-secondary" type="button">Evens</button>
                </div>

                <div id="splitThumbStrip" class="page-strip" style="margin-top:10px;">
                  <div class="muted">Upload a PDF to generate selectable pages.</div>
                </div>

                <div class="outputs-preview" style="margin-top:10px;">
                  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
                    <div><b>Output preview</b> <span class="muted">(what will be generated)</span></div>
                    <div class="muted" id="splitOutputSummary"></div>
                  </div>
                  <div id="splitOutputsPreview" style="margin-top:8px;"></div>
                </div>

                <div class="tool-actions">
                  <button id="splitPdfBtn" class="btn btn-primary" type="button">Split &amp; export</button>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
</div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="splitPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="splitPreviewFrame" title="Split Preview" style="position:relative;top:-64px;height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- PDFREALM_PREMIUM_EMBED_MEDIA_INDEX_V1: tool views -->
        <!-- Embed Video -->
        <div class="tool-view" data-tool-view="embedvideo">
          <div class="tool-header">
            <div>
              <h2>Embed Video</h2>
              <p>Embed a video file into your PDF as an attached media asset with an on-page label. Compatible with enterprise viewers (e.g., Acrobat) via PDF attachments.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="embedVideoPdfFile">PDF file</label>
                  <input id="embedVideoPdfFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="embedVideoPdfPassword">Password (if encrypted)</label>
                      <input id="embedVideoPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                    </div>
                    <div>
                      <button id="embedVideoUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                    </div>
                  </div>

                  <label for="embedVideoFile" style="margin-top:10px;">Video file</label>
                  <input id="embedVideoFile" type="file" accept="video/*" />

                  <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:140px;">
                      <label for="embedVideoPage">Page</label>
                      <input id="embedVideoPage" type="number" min="1" value="1" />
                    </div>
                    <div style="flex:1;min-width:140px;">
                      <label for="embedVideoLabel">Label</label>
                      <input id="embedVideoLabel" type="text" placeholder="Video" value="Video" />
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="embedVideoPreviewBtn" class="btn btn-secondary" type="button">Build preview</button>
                  </div>
                  <div id="embedVideoStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="embedVideoInputPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                    <div id="embedVideoInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="embedVideoExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="embedVideoOutputPlaceholder" class="placeholder">Build preview to see the output here.</div>
                  <div id="embedVideoOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Embed Audio -->
        <div class="tool-view" data-tool-view="embedaudio">
          <div class="tool-header">
            <div>
              <h2>Embed Audio</h2>
              <p>Embed an audio file into your PDF as an attached media asset with an on-page label (PDF attachments).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="embedAudioPdfFile">PDF file</label>
                  <input id="embedAudioPdfFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="embedAudioPdfPassword">Password (if encrypted)</label>
                      <input id="embedAudioPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                    </div>
                    <div>
                      <button id="embedAudioUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                    </div>
                  </div>

                  <label for="embedAudioFile" style="margin-top:10px;">Audio file</label>
                  <input id="embedAudioFile" type="file" accept="audio/*" />

                  <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:140px;">
                      <label for="embedAudioPage">Page</label>
                      <input id="embedAudioPage" type="number" min="1" value="1" />
                    </div>
                    <div style="flex:1;min-width:140px;">
                      <label for="embedAudioLabel">Label</label>
                      <input id="embedAudioLabel" type="text" placeholder="Audio" value="Audio" />
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="embedAudioPreviewBtn" class="btn btn-secondary" type="button">Build preview</button>
                  </div>
                  <div id="embedAudioStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="embedAudioInputPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                    <div id="embedAudioInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="embedAudioExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="embedAudioOutputPlaceholder" class="placeholder">Build preview to see the output here.</div>
                  <div id="embedAudioOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Embed Image -->
        <div class="tool-view" data-tool-view="embedimage">
          <div class="tool-header">
            <div>
              <h2>Embed Image</h2>
              <p>Stamp an image into a PDF page with precise placement (supports PNG/JPG). Includes preview + export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="embedImagePdfFile">PDF file</label>
                  <input id="embedImagePdfFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="embedImagePdfPassword">Password (if encrypted)</label>
                      <input id="embedImagePdfPassword" type="password" placeholder="Password" autocomplete="off" />
                    </div>
                    <div>
                      <button id="embedImageUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                    </div>
                  </div>

                  <label for="embedImageFile" style="margin-top:10px;">Image file (PNG/JPG)</label>
                  <input id="embedImageFile" type="file" accept="image/png,image/jpeg" />

                  <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:120px;">
                      <label for="embedImagePage">Page</label>
                      <input id="embedImagePage" type="number" min="1" value="1" />
                    </div>
                    <div style="flex:1;min-width:120px;">
                      <label for="embedImageX">X (0‚Äì1)</label>
                      <input id="embedImageX" type="number" step="0.01" min="0" max="1" value="0.10" />
                    </div>
                    <div style="flex:1;min-width:120px;">
                      <label for="embedImageY">Y (0‚Äì1)</label>
                      <input id="embedImageY" type="number" step="0.01" min="0" max="1" value="0.10" />
                    </div>
                    <div style="flex:1;min-width:120px;">
                      <label for="embedImageW">Width (0‚Äì1)</label>
                      <input id="embedImageW" type="number" step="0.01" min="0.05" max="1" value="0.35" />
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="embedImagePreviewBtn" class="btn btn-secondary" type="button">Build preview</button>
                  </div>
                  <div id="embedImageStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="embedImageInputPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                    <div id="embedImageInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="embedImageExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="embedImageOutputPlaceholder" class="placeholder">Build preview to see the output here.</div>
                  <div id="embedImageOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

<!-- Word ‚Üí PDF -->
        <div class="tool-view" data-tool-view="word2pdf">
          <div class="tool-header">
            <div>
              <h2>Word ‚Üí PDF</h2>
              <p>Upload a Word document, preview it, convert to PDF, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="w2pFile">Word file</label>
                  <input id="w2pFile" type="file" accept=".doc,.docx,.rtf,.odt,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />

                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="w2pPassword">Password (if encrypted)</label>
                      <input id="w2pPassword" type="password" placeholder="Password" autocomplete="off" />
                    </div>
                    <div>
                      <button id="w2pPreviewBtn" class="btn btn-secondary" type="button">Preview input</button>
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="wordToPdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="w2pStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="w2pInputPlaceholder" class="placeholder">Upload a Word doc to preview it here.</div>
                    <div id="w2pInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="wordToPdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="w2pOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="w2pOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        
        <!-- HTML ‚Üí PDF -->
        <div class="tool-view" data-tool-view="html2pdf">
          <div class="tool-header">
            <div>
              <h2>HTML ‚Üí PDF</h2>
              <p>Paste HTML or upload a .html file, preview, then export. (Full HTML rendering uses Playwright/Chromium‚Äîenable later with Docker.)</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="html2pdfFile">HTML file (optional)</label>
                <input id="html2pdfFile" type="file" accept=".html,.htm,text/html" />
                <label for="html2pdfHtml">HTML</label>
                <textarea id="html2pdfHtml" rows="10" placeholder="Paste HTML here..."></textarea>

                <div class="tool-actions">
                  <button id="html2pdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                </div>
                <div id="html2pdfStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="html2pdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="html2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="html2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- URL ‚Üí PDF -->
        <div class="tool-view" data-tool-view="url2pdf">
          <div class="tool-header">
            <div>
              <h2>URL ‚Üí PDF</h2>
              <p>Convert a public URL to PDF. (Uses Playwright/Chromium‚Äîenable later with Docker.)</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="url2pdfUrl">URL</label>
                <input id="url2pdfUrl" type="text" placeholder="https://example.com" />

                <div class="tool-actions">
                  <button id="url2pdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                </div>
                <div id="url2pdfStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="url2pdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="url2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="url2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- JSON ‚Üí PDF -->
        <div class="tool-view" data-tool-view="json2pdf">
          <div class="tool-header">
            <div>
              <h2>JSON ‚Üí PDF</h2>
              <p>Paste JSON or upload a .json file, preview, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="json2pdfFile">JSON file (optional)</label>
                <input id="json2pdfFile" type="file" accept="application/json,.json" />
                <label for="json2pdfJson">JSON</label>
                <textarea id="json2pdfJson" rows="10" placeholder="Paste JSON here..."></textarea>

                <div class="tool-actions">
                  <button id="json2pdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                </div>
                <div id="json2pdfStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="json2pdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="json2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="json2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Markdown ‚Üí PDF -->
        <div class="tool-view" data-tool-view="md2pdf">
          <div class="tool-header">
            <div>
              <h2>Markdown ‚Üí PDF</h2>
              <p>Paste Markdown, preview, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="md2pdfMd">Markdown</label>
                <textarea id="md2pdfMd" rows="10" placeholder="Paste Markdown here..."></textarea>
                <div class="tool-actions">
                  <button id="md2pdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                </div>
                <div id="md2pdfStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="md2pdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="md2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="md2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- CSV ‚Üí PDF -->
        <div class="tool-view" data-tool-view="csv2pdf">
          <div class="tool-header">
            <div>
              <h2>CSV ‚Üí PDF</h2>
              <p>Paste CSV or upload a .csv file, preview, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="csv2pdfFile">CSV file (optional)</label>
                <input id="csv2pdfFile" type="file" accept="text/csv,.csv" />
                <label for="csv2pdfCsv">CSV</label>
                <textarea id="csv2pdfCsv" rows="10" placeholder="Paste CSV here..."></textarea>
1,2"></textarea>

                <div class="tool-actions">
                  <button id="csv2pdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                </div>
                <div id="csv2pdfStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="csv2pdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="csv2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="csv2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Text ‚Üí PDF -->
        <div class="tool-view" data-tool-view="txt2pdf">
          <div class="tool-header">
            <div>
              <h2>Text ‚Üí PDF</h2>
              <p>Paste text, preview, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="txt2pdfText">Text</label>
                <textarea id="txt2pdfText" rows="10" placeholder="Type or paste text here..."></textarea>

                <div class="tool-actions">
                  <button id="txt2pdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                </div>
                <div id="txt2pdfStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="txt2pdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="txt2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="txt2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
<!-- PDF ‚Üí Word -->

        <!-- PDF ‚Üí Word -->
        <div class="tool-view" data-tool-view="pdf2word">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí Word</h2>
              <p>Upload a PDF, preview it, convert to Word, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="p2wFile">PDF file</label>
                  <input id="p2wFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="pdfToWordPassword">Password (if encrypted)</label>
                      <input id="pdfToWordPassword" type="password" placeholder="Password" autocomplete="off" />
                    </div>
                    <div>
                      <button id="p2wPreviewBtn" class="btn btn-secondary" type="button">Preview input</button>
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="pdfToWordPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="p2wStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview (PDF)</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="pdf2wordInputPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                    <div id="pdf2wordInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (Word)</div>
                  <div class="viewer-tools">
                    <button id="pdfToWordExportBtn" class="btn btn-primary" type="button" disabled>Export Word</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="pdf2wordOutputPlaceholder" class="placeholder">Convert (preview) to see the Word output here.</div>
                  <div id="pdf2wordOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

<!-- TIFF ‚Üí PDF -->
        <div class="tool-view" data-tool-view="tiff2pdf">
          <div class="tool-header">
            <div>
              <h2>TIFF ‚Üí PDF</h2>
              <p>Upload a TIFF, preview it, convert to PDF, preview the PDF, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="tiffToPdfFile">TIFF file</label>
                  <input id="tiffToPdfFile" type="file" accept="image/tiff,.tif,.tiff" />

                  <div class="tool-actions">
                    <button id="tiffToPdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="tiff2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="tiff2pdfInputPlaceholder" class="placeholder">Upload a TIFF to preview it here.</div>
                    <div id="tiff2pdfInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="tiffToPdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="tiff2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="tiff2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- SVG ‚Üí PDF -->

        <div class="tool-view" data-tool-view="svg2pdf">
          <div class="tool-header">
            <div>
              <h2>SVG ‚Üí PDF</h2>
              <p>Upload an SVG, preview it, convert to PDF, preview the PDF, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="svgToPdfFile">SVG file</label>
                  <input id="svgToPdfFile" type="file" accept="image/svg+xml,.svg" />

                  <div class="tool-actions">
                    <button id="svgToPdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="svg2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="svg2pdfInputPlaceholder" class="placeholder">Upload an SVG to preview it here.</div>
                    <div id="svg2pdfInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="svgToPdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="svg2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="svg2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

                <!-- JPG ‚Üí PNG -->
        <div class="tool-view" data-tool-view="jpg2png">
          <div class="tool-header">
            <div>
              <h2>JPG ‚Üí PNG</h2>
              <p>Upload a JPG, preview it, convert to PNG, preview the PNG, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="jpgToPngFile">JPG file</label>
                  <input id="jpgToPngFile" type="file" accept="image/jpeg,image/jpg" />

                  <div class="tool-actions">
                    <button id="jpgToPngPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="jpg2pngStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="jpg2pngInputPlaceholder" class="placeholder">Upload a JPG to preview it here.</div>
                    <div id="jpg2pngInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PNG)</div>
                  <div class="viewer-tools">
                    <button id="jpgToPngExportBtn" class="btn btn-primary" type="button" disabled>Export PNG</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="jpg2pngOutputPlaceholder" class="placeholder">Convert (preview) to see the PNG here.</div>
                  <div id="jpg2pngOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PNG ‚Üí JPG -->
        <div class="tool-view" data-tool-view="png2jpg">
          <div class="tool-header">
            <div>
              <h2>PNG ‚Üí JPG</h2>
              <p>Upload a PNG, preview it, convert to JPG, preview the JPG, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pngToJpgFile">PNG file</label>
                  <input id="pngToJpgFile" type="file" accept="image/png" />

                  <div class="tool-actions">
                    <button id="pngToJpgPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="png2jpgStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="png2jpgInputPlaceholder" class="placeholder">Upload a PNG to preview it here.</div>
                    <div id="png2jpgInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (JPG)</div>
                  <div class="viewer-tools">
                    <button id="pngToJpgExportBtn" class="btn btn-primary" type="button" disabled>Export JPG</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="png2jpgOutputPlaceholder" class="placeholder">Convert (preview) to see the JPG here.</div>
                  <div id="png2jpgOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- DOCX ‚Üí PNG -->
        <div class="tool-view" data-tool-view="docx2png">
          <div class="tool-header">
            <div>
              <h2>DOCX ‚Üí PNG</h2>
              <p>Upload a DOCX, preview it, convert to PNG images (ZIP), preview the output, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="docxToPngFile">DOCX file</label>
                  <input id="docxToPngFile" type="file" accept=".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />

                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="docxToPngPassword">Password (if encrypted)</label>
                      <input id="docxToPngPassword" type="password" placeholder="Password" autocomplete="off" />
                    </div>
                    <div>
                      <button id="d2pPreviewBtn" class="btn btn-secondary" type="button">Preview input</button>
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="docxToPngPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="docx2pngStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="docx2pngInputPlaceholder" class="placeholder">Upload a DOCX to preview it here.</div>
                    <div id="docx2pngInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PNG ZIP)</div>
                  <div class="viewer-tools">
                    <button id="docxToPngExportBtn" class="btn btn-primary" type="button" disabled>Export ZIP</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="docx2pngOutputPlaceholder" class="placeholder">Convert (preview) to see the PNG output here.</div>
                  <div id="docx2pngOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Compress --><!-- Compress -->
        <div class="tool-view" data-tool-view="compress">
          <div class="tool-header">
            <div>
              <h2>Compress PDF</h2>
              <p>Re-save a PDF with optimized structure to reduce size (lossless/structural).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="compressPdfFile">PDF file</label>
                <input id="compressPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="compressPdfPassword">Password (if encrypted)</label>
                    <input id="compressPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="compressUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>
<div class="tool-actions" style="gap:10px;flex-wrap:wrap;">
                  <button id="compressPdfBtn" class="btn btn-primary" type="button">Compress &amp; Export</button>
                </div>

                <details class="advanced" style="margin-top:10px;">
                  <summary class="muted" style="cursor:pointer;">Optional: Decompress / Normalize (compatibility)</summary>
                  <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
                    <button id="compressNormalizeBtn" class="btn btn-secondary" type="button">Decompress / Normalize</button>
                    <div class="muted">Helps with editing/compatibility. It can increase file size and won‚Äôt restore lost quality.</div>
                  </div>
                </details>
</div>
              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="compressPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="compressPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="compressPreviewFrame" title="Compress PDF Preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Rotate -->
        <div class="tool-view" data-tool-view="rotate">
          <div class="tool-header">
            <div>
              <h2>Rotate Pages</h2>
              <p>Preview and rotate before exporting. Rotation defaults to all pages unless you set a page range.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="rotatePdfFile">PDF file</label>
                <input id="rotatePdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="rotatePdfPassword">Password (if encrypted)</label>
                    <input id="rotatePdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="rotateUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="rotatePagesRange" style="margin-top:10px;">Pages to rotate (optional)</label>
                <input id="rotatePagesRange" type="text" placeholder="Leave blank for all pages (e.g., 2-4,7)" />

                <div style="margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                  <div style="color:var(--muted);font-size:0.95rem;">Rotation:</div>
                  <div id="rotateRotationLabel" style="font-weight:800;">0¬∞</div>
                </div>
                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;">
                  <button id="rotateLeftBtn" class="btn btn-secondary" type="button">‚ü≤ Rotate Left</button>
                  <button id="rotateRightBtn" class="btn btn-secondary" type="button">‚ü≥ Rotate Right</button>
                  <button id="rotateResetBtn" class="btn btn-secondary" type="button">Reset</button>
                  <button id="rotatePdfBtn" class="btn btn-primary" type="button">Rotate &amp; Export</button>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;">
                  <div class="viewer-title">Preview</div>
                  <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:flex-end;">
                    <div style="display:flex;gap:8px;align-items:center;">
                      <button id="rotatePrevPageBtn" class="btn btn-secondary" type="button">Prev</button>
                      <input id="rotatePreviewPage" type="number" value="1" min="1" style="width:80px;" />
                      <div style="color:var(--muted);font-size:0.95rem;">/ <span id="rotatePageCount">?</span></div>
                      <button id="rotateNextPageBtn" class="btn btn-secondary" type="button">Next</button>
                    </div>
                    <div style="display:flex;gap:8px;align-items:center;">
                      <div style="color:var(--muted);font-size:0.95rem;">Zoom</div>
                      <input id="rotateZoom" type="range" min="50" max="200" value="110" step="5" style="width:160px;" />
                      <div id="rotateZoomLabel" style="color:var(--muted);font-size:0.95rem;min-width:56px;text-align:right;">110%</div>
                    </div>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:auto;">
                  <div id="rotatePreviewPlaceholder" class="placeholder">Upload a PDF to preview. If it's encrypted, enter the password then click Decrypt / Unlock.</div>
                  <div id="rotatePreviewStage" style="display:none;padding:6px;">
                    <div id="rotatePreviewInner" style="position:relative;margin:0 auto;">
                      <img id="rotatePreviewImg" alt="Rotate preview" style="position:absolute;left:50%;top:50%;transform-origin:center center;display:block;max-width:none;max-height:none;" />
                    </div>
                  </div>
              </div>
            </div>
          </div>
        </div>

        </div>
        <!-- Reorder -->
        <div class="tool-view" data-tool-view="reorder">
          <div class="tool-header">
            <div>
              <h2>Reorder Pages</h2>
              <p>Rearrange pages by specifying a custom order (e.g., <b>3,1,2</b>). If the PDF is password-protected, use <b>Decrypt / Unlock</b> first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                                <label for="reorderPdfFile">PDF file</label>
                <input id="reorderPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="reorderPdfPassword">Password (if encrypted)</label>
                    <input id="reorderPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="reorderUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>
                <label for="reorderPages">Order (e.g., 3,1,2)</label>
                <input id="reorderPages" type="text" placeholder="3,1,2" />

                <div class="reorder-list-head">
  <div class="hint">Drag pages up/down to set the exact order (updates the Order field automatically).</div>
  <div class="reorder-head-actions">
    <button id="reorderRefreshBtn" class="btn btn-secondary" type="button">Refresh Preview</button>
    <button id="reorderResetBtn" class="btn btn-secondary" type="button">Reset</button>
  </div>
</div>
                <div id="reorderPreviewStatus" class="hint" style="margin:10px 0 0 0; display:none;"></div>
                <div id="reorderPageList" class="reorder-page-list">
                  <div class="reorder-list-empty">Upload a PDF to generate draggable pages.</div>
                </div>
                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;">
                  <button id="reorderPdfBtn" class="btn btn-primary" type="button">Reorder Pages &amp; Export</button>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="reorderPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="reorderPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="reorderPreviewFrame" title="Reorder PDF Preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Watermark -->
        <div class="tool-view" data-tool-view="watermark">
          <div class="tool-header">
            <div>
              <h2>Watermark</h2>
              <p>Overlay large, semi-transparent text (e.g., CONFIDENTIAL) across each page.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="watermarkPdfFile">PDF file</label>
                <input id="watermarkPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="watermarkPdfPassword">Password (if encrypted)</label>
                    <input id="watermarkPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="watermarkUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="watermarkText" style="margin-top:10px;">Text</label>
                <input id="watermarkText" type="text" placeholder="CONFIDENTIAL" />
                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;">
                  <button id="watermarkPreviewBtn" class="btn btn-secondary" type="button">Preview</button>
                  <button id="watermarkPdfBtn" class="btn btn-primary" type="button">Apply Watermark &amp; Export</button>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="watermarkPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="watermarkPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="watermarkPreviewFrame" title="Watermark PDF Preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Metadata -->
        <div class="tool-view" data-tool-view="metadata">
          <div class="tool-header">
            <div>
              <h2>Metadata</h2>
              <p>Remove or apply document metadata (title, author, subject, keywords).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="metaPdfFile">PDF file</label>
                <input id="metaPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="metaPdfPassword">Password (if encrypted)</label>
                    <input id="metaPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="metaUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="metaTitle">Title</label>
                <input id="metaTitle" type="text" />
                <label for="metaAuthor">Author</label>
                <input id="metaAuthor" type="text" />
                <label for="metaSubject">Subject</label>
                <input id="metaSubject" type="text" />
                <label for="metaKeywords">Keywords</label>
                <input id="metaKeywords" type="text" />
                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;">
                  <button id="metaRemoveBtn" class="btn btn-secondary" type="button">Preview Remove Metadata</button>
                  <button id="metaApplyBtn" class="btn btn-secondary" type="button">Preview Apply Metadata</button>
                  <button id="metaExportBtn" class="btn btn-primary" type="button">Export</button>
                </div>
                <div id="metaExportHint" class="hint" style="margin-top:8px;">Click a Preview button, then Export to download.</div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="metaPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="metaPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="metaPreviewFrame" title="Metadata PDF Preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Flatten -->
        <div class="tool-view" data-tool-view="flatten">
          <div class="tool-header">
            <div>
              <h2>Flatten PDF</h2>
              <p>Re-save PDFs so form fields and annotations are converted to static content. If the PDF is password-protected, use <b>Decrypt / Unlock</b> first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="flattenPdfFile">PDF file</label>
                <input id="flattenPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="flattenPdfPassword">Password (if encrypted)</label>
                    <input id="flattenPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="flattenUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <div class="tool-actions">
                  <button id="flattenPdfBtn" class="btn btn-primary" type="button">Flatten &amp; Export</button>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="flattenPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="flattenPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="flattenPreviewFrame" title="Flatten PDF Preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Repair -->
        <div class="tool-view" data-tool-view="repair">
          <div class="tool-header">
            <div>
              <h2>Repair PDF</h2>
              <p>Attempts a clean rewrite to fix common PDF structural issues.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="repairPdfFile">PDF file</label>
                <input id="repairPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="repairPdfPassword">Password (if encrypted)</label>
                    <input id="repairPdfPassword" type="password" placeholder="Optional" />
                  </div>
                  <button id="repairUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                </div>

                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="repairPdfBtn" class="btn" type="button">Repair & Export</button>
                </div>

                <p class="hint">Tip: If a PDF won‚Äôt open reliably, ‚ÄúRepair‚Äù often fixes cross-reference/structure issues.</p>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools"></div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="repairPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="repairPreviewFrame" title="Repair preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Remove Blank Pages -->
        <div class="tool-view" data-tool-view="blank">
          <div class="tool-header">
            <div>
              <h2>Remove Blank Pages</h2>
              <p>Removes blank/near-blank pages. (Conservative by default.)</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="blankPdfFile">PDF file</label>
                <input id="blankPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="blankPdfPassword">Password (if encrypted)</label>
                    <input id="blankPdfPassword" type="password" placeholder="Optional" />
                  </div>
                  <button id="blankUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                </div>

                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;align-items:flex-end;">
                  <div style="flex:1;min-width:220px;">
                    <label for="blankThreshold">Sensitivity</label>
                    <input id="blankThreshold" type="number" step="0.00001" min="0" max="0.01" value="0.00005" />
                    <div class="hint">Lower = keeps more pages. Higher = removes more pages.</div>
                  </div>
                  <button id="blankPdfBtn" class="btn" type="button">Remove & Export</button>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools"></div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="blankPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="blankPreviewFrame" title="Blank pages preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Resize Pages -->
        <div class="tool-view" data-tool-view="resize">
          <div class="tool-header">
            <div>
              <h2>Resize Pages</h2>
              <p>Normalize page sizes to Letter or A4 (fit/fill).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="resizePdfFile">PDF file</label>
                <input id="resizePdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="resizePdfPassword">Password (if encrypted)</label>
                    <input id="resizePdfPassword" type="password" placeholder="Optional" />
                  </div>
                  <button id="resizeUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                </div>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;">
                  <div>
                    <label for="resizePreset">Target</label>
                    <select id="resizePreset">
                      <option value="letter">Letter (8.5√ó11)</option>
                      <option value="a4">A4</option>
                    </select>
                  </div>
                  <div>
                    <label for="resizeMode">Mode</label>
                    <select id="resizeMode">
                      <option value="fit">Fit (no crop)</option>
                      <option value="fill">Fill (may crop)</option>
                    </select>
                  </div>
                </div>

                <div style="margin-top:10px;">
                  <label for="resizeMargin">Margin (points)</label>
                  <input id="resizeMargin" type="number" min="0" max="144" step="1" value="18" />
                </div>

                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="resizePdfBtn" class="btn" type="button">Resize & Export</button>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools"></div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="resizePreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="resizePreviewFrame" title="Resize preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Extract Text -->
        <div class="tool-view" data-tool-view="extracttext">
          <div class="tool-header">
            <div>
              <h2>Extract Text</h2>
              <p>Extracts searchable text from a PDF (client-side using PDF.js).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="textPdfFile">PDF file</label>
                <input id="textPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="textPdfPassword">Password (if encrypted)</label>
                    <input id="textPdfPassword" type="password" placeholder="Optional" />
                  </div>
                  <button id="textUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                </div>

                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="textExtractBtn" class="btn" type="button">Extract</button>
                  <button id="textDownloadTxtBtn" class="btn btn-outline" type="button" disabled>Download .txt</button>
                  <button id="textDownloadJsonBtn" class="btn btn-outline" type="button" disabled>Download .json</button>
                </div>

                <p class="hint">Note: OCR images won‚Äôt produce text here unless your PDF already contains a text layer.</p>
              </div>

              <div class="card">
                <div class="preview-title">Output</div>
                <pre id="textOutput" style="height:420px;overflow:auto;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:12px;white-space:pre-wrap;"></pre>
              </div>
            </div>
          </div>
        </div>

        <!-- Compare -->
        <div class="tool-view" data-tool-view="compare">
          <div class="tool-header">
            <div>
              <h2>Compare PDFs</h2>
              <p>Compares PDFs page-by-page (text-based) using PDF.js in your browser.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="compareFileA">PDF A</label>
                <input id="compareFileA" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="comparePasswordA">Password (if encrypted)</label>
                    <input id="comparePasswordA" type="password" placeholder="Password for PDF A" autocomplete="off" />
                  </div>
                  <div>
                    <button id="compareUnlockABtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="compareFileB" style="margin-top:10px;">PDF B</label>
                <input id="compareFileB" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="comparePasswordB">Password (if encrypted)</label>
                    <input id="comparePasswordB" type="password" placeholder="Password for PDF B" autocomplete="off" />
                  </div>
                  <div>
                    <button id="compareUnlockBBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="compareRunBtn" class="btn" type="button">Compare</button>
                  <button id="compareDownloadTxtBtn" class="btn btn-outline" type="button" disabled>Download .txt</button>
                  <button id="compareDownloadJsonBtn" class="btn btn-outline" type="button" disabled>Download .json</button>
                </div>

                <p class="hint">This is a text diff. Visual diffs (pixel compare) will be added once you move to Docker.</p>
              </div>

              <div class="card">
                <div class="preview-title">Results</div>
                <pre id="compareResult" style="height:420px;overflow:auto;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:12px;white-space:pre-wrap;"></pre>
              </div>
            </div>
          </div>
        </div>

        <!-- Page Numbers -->
        <div class="tool-view" data-tool-view="pagenums">
          <div class="tool-header">
            <div>
              <h2>Bates / Numbering</h2>
              <p>Add Bates-style numbering (or simple page numbers) with an optional prefix.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="pageNumsPdfFile">PDF file</label>
                <input id="pageNumsPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="pageNumsPdfPassword">Password (if encrypted)</label>
                    <input id="pageNumsPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="pageNumsUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="pageNumsStart" style="margin-top:10px;">Start #</label>
                <input id="pageNumsStart" type="number" value="1" />
                <label for="pageNumsPrefix">Prefix</label>
                <input id="pageNumsPrefix" type="text" placeholder="Optional prefix" />
                <label for="pageNumsPos" style="margin-top:10px;">Position</label>
                <select id="pageNumsPos">
                  <option value="br" selected>Bottom Right</option>
                  <option value="bl">Bottom Left</option>
                  <option value="tr">Top Right</option>
                  <option value="tl">Top Left</option>
                </select>

                <div class="grid2" style="gap:10px;margin-top:10px;">
                  <div>
                    <label for="pageNumsSize">Font size</label>
                    <input id="pageNumsSize" type="number" value="10" min="6" max="72" />
                  </div>
                  <div>
                    <label for="pageNumsMargin">Margin</label>
                    <input id="pageNumsMargin" type="number" value="30" min="0" max="200" />
                  </div>
                </div>

                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;">
                  <button id="pageNumsPreviewBtn" class="btn btn-secondary" type="button">Preview</button>
                  <button id="pageNumsBtn" class="btn btn-primary" type="button">Apply Bates / Numbering &amp; Export</button>
                </div>
                <div id="pageNumsPreviewHint" class="muted" style="margin-top:10px;display:none;">Preview updated. Change settings and click Preview again to refresh.</div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="pageNumsPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="pageNumsPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="pageNumsPreviewFrame" title="Page Numbers Preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Timestamp -->
        <div class="tool-view" data-tool-view="stamp">
          <div class="tool-header">
            <div>
              <h2>Timestamp</h2>
              <p>Add a timestamp (date/time) stamp to each page. You can choose a format and an optional prefix.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="stampPdfFile">PDF file</label>
                <input id="stampPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="stampPdfPassword">Password (if encrypted)</label>
                    <input id="stampPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="stampUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="stampFormat" style="margin-top:10px;">Timestamp format</label>
                <select id="stampFormat">
                  <option value="us-dt" selected>MM/DD/YYYY HH:MM</option>
                  <option value="us">MM/DD/YYYY</option>
                  <option value="iso-dt">YYYY-MM-DD HH:MM</option>
                  <option value="iso">YYYY-MM-DD</option>
                  <option value="locale">Locale (system)</option>
                </select>

                <label for="stampPrefix">Prefix (optional)</label>
                <input id="stampPrefix" type="text" placeholder="e.g., Printed: " />

                <div style="display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="min-width:200px;">
                    <label style="display:flex;gap:10px;align-items:center;">
                      <input id="stampUseCustomDate" type="checkbox" />
                      Use custom date/time
                    </label>
                  </div>
                  <div style="flex:1;min-width:220px;">
                    <label for="stampCustomDate">Custom date/time (optional)</label>
                    <input id="stampCustomDate" type="datetime-local" disabled />
                    <div class="muted" style="margin-top:6px; font-size:0.9rem;">
                      Leave unchecked to use current date/time. Useful for pre/post-dating.
                    </div>
                  </div>
                </div>

                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;">
                  <button id="stampPreviewBtn" class="btn btn-secondary" type="button">Preview</button>
                  <button id="stampPdfBtn" class="btn btn-primary" type="button">Apply Timestamp &amp; Export</button>
                </div>
                <div id="stampPreviewHint" class="muted" style="margin-top:10px;display:none;">Preview updated. Change settings and click Preview again to refresh.</div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="stampPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="overflow:hidden;">
                  <div id="stampPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <iframe id="stampPreviewFrame" title="Timestamp Preview" style="position:relative; top:-64px; height:calc(100% + 64px);"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Redact -->
        <div class="tool-view" data-tool-view="redact">
          <div class="tool-header">
            <div>
              <h2>Redact</h2>
              <p>
                Place adjustable black boxes and use a black marker to permanently redact sensitive content.
                Use <b>Preview</b> to re-render the page; <b>Export</b> burns the redactions into the PDF.
              </p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="redactPdfFile">PDF file</label>
                <input id="redactPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="redactPdfPassword">Password (if encrypted)</label>
                    <input id="redactPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="redactUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <div class="redact-toolbar">
                  <div class="group">
                    <div class="seg" role="group" aria-label="Redact mode">
                      <button id="redactModeBox" class="btn btn-secondary active" type="button">Black Box</button>
                      <button id="redactModeMarker" class="btn btn-secondary" type="button">Marker</button>
                    </div>
                  </div>

                  <div class="group" style="align-items:center;">
                    <label for="redactMarkerSize" class="muted" style="margin:0;">Marker size</label>
                    <input id="redactMarkerSize" type="range" min="4" max="44" step="2" value="14" />
                  </div>

                  <div class="group">
                    <button id="redactUndoBtn" class="btn btn-secondary" type="button">Undo</button>
                    <button id="redactClearPageBtn" class="btn btn-secondary" type="button">Clear Page</button>
                  </div>
                </div>

                <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px;">
                  <input id="redactBurnIn" type="checkbox" checked />
                  <label for="redactBurnIn" style="margin:0;">Permanent burn-in (image-only PDF)</label>
                </div>
                <div class="muted" style="margin-top:6px;">Creates a larger image-only PDF so redactions cannot be removed or recovered.</div>

                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="redactPreviewBtn" class="btn btn-secondary" type="button">Preview</button>
                  <button id="redactPdfBtn" class="btn btn-primary" type="button">Apply Redaction &amp; Export</button>
                </div>

                <div id="redactPreviewHint" class="muted" style="margin-top:10px;display:none;">Preview updated.</div>

                <!-- Legacy textarea (kept for compatibility; kept hidden) -->
                <textarea id="redactBoxes" style="display:none;"></textarea>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools" style="gap:8px;flex-wrap:wrap;">
                    <button id="redactPrevPageBtn" class="btn btn-secondary" type="button">Prev</button>
                    <div id="redactPageLabel" class="muted" style="min-width:92px;text-align:center;">Page 1 / 1</div>
                    <button id="redactNextPageBtn" class="btn btn-secondary" type="button">Next</button>
                  </div>
                </div>
                <div class="viewer-wrapper" id="redactViewerWrapper" style="overflow:auto;">
                  <div id="redactPreviewPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                  <div id="redactCanvasShell" class="pdf-canvas-shell" style="display:none;">
                    <canvas id="redactPdfCanvas"></canvas>
                    <canvas id="redactInkCanvas"></canvas>
                    <canvas id="redactHitCanvas"></canvas>
                    <div id="redactBoxLayer"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        

        <!-- JPG ‚Üí PDF -->

        <div class="tool-view" data-tool-view="jpg2pdf">
          <div class="tool-header">
            <div>
              <h2>JPG ‚Üí PDF</h2>
              <p>Upload a JPG, preview it, convert to PDF, preview the PDF, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="jpgToPdfFile">JPG file</label>
                  <input id="jpgToPdfFile" type="file" accept="image/jpeg,image/jpg" />

                  <div class="tool-actions">
                    <button id="jpgToPdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="jpg2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="jpg2pdfInputPlaceholder" class="placeholder">Upload a JPG to preview it here.</div>
                    <div id="jpg2pdfInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="jpgToPdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="jpg2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="jpg2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- PNG ‚Üí PDF -->
        <div class="tool-view" data-tool-view="png2pdf">
          <div class="tool-header">
            <div>
              <h2>PNG ‚Üí PDF</h2>
              <p>Upload a PNG, preview it, convert to PDF, preview the PDF, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pngToPdfFile">PNG file</label>
                  <input id="pngToPdfFile" type="file" accept="image/png" />

                  <div class="tool-actions">
                    <button id="pngToPdfPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="png2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="png2pdfInputPlaceholder" class="placeholder">Upload a PNG to preview it here.</div>
                    <div id="png2pdfInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PDF)</div>
                  <div class="viewer-tools">
                    <button id="pngToPdfExportBtn" class="btn btn-primary" type="button" disabled>Export PDF</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="png2pdfOutputPlaceholder" class="placeholder">Convert (preview) to see the PDF here.</div>
                  <div id="png2pdfOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PDF ‚Üí JPG (stub) -->

        <!-- PDF ‚Üí JPG -->
        <div class="tool-view" data-tool-view="pdf2jpg">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí JPG</h2>
              <p>Upload a PDF, preview it, convert to a ZIP of JPG pages, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdfToJpgFile">PDF file</label>
                  <input id="pdfToJpgFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="pdfToJpgPassword">Password (if encrypted)</label>
                      <input id="pdfToJpgPassword" type="password" placeholder="Password" autocomplete="off" />
                    </div>
                    <div>
                      <button id="pdfToJpgInputPreviewBtn" class="btn btn-secondary" type="button">Preview input</button>
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="pdfToJpgPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="pdf2jpgStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview (PDF)</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="pdf2jpgInputPlaceholder" class="placeholder">Upload a PDF to preview it here.</div>
                    <div id="pdf2jpgInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (JPG)</div>
                  <div class="viewer-tools">
                    <button id="pdfToJpgExportBtn" class="btn btn-primary" type="button" disabled>Export ZIP</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="pdf2jpgOutputPlaceholder" class="placeholder">Convert (preview) to see JPG pages here.</div>
                  <div id="pdf2jpgOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

<!-- PDF ‚Üí PNG -->
        <div class="tool-view" data-tool-view="pdf2png">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí PNG</h2>
              <p>Upload a PDF, preview it, convert to PNGs (ZIP), preview pages, then export.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdfToPngFile">PDF file</label>
                  <input id="pdfToPngFile" type="file" accept="application/pdf" />

                  
                  <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:220px;">
                      <label for="pdfToPngPassword">Password (if encrypted)</label>
                      <input id="pdfToPngPassword" type="password" placeholder="Enter password to unlock (if encrypted)" autocomplete="off" />
                    </div>
                    <div>
                      <button id="pdfToPngUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="pdfToPngPreviewBtn" class="btn btn-secondary" type="button">Convert (preview)</button>
                  </div>

                  <div id="pdf2pngStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card viewer-card">
                  <div class="viewer-top">
                    <div class="viewer-title">Input Preview</div>
                  </div>
                  <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                    <div id="pdf2pngInputPlaceholder" class="placeholder">Upload a PDF to preview it here. If it's encrypted, enter the password then click Decrypt / Unlock.</div>
                    <div id="pdf2pngInputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                  </div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Output Preview (PNG pages)</div>
                  <div class="viewer-tools">
                    <button id="pdfToPngExportBtn" class="btn btn-primary" type="button" disabled>Export ZIP</button>
                  </div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <div id="pdf2pngOutputPlaceholder" class="placeholder">Convert (preview) to see PNG pages here.</div>
                  <div id="pdf2pngOutputPreviewHost" class="ocr-preview-host" style="position:absolute;inset:0;overflow:auto;padding:12px;user-select:none;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- OCR -->
        <div class="tool-view" data-tool-view="ocr">
          <div class="tool-header">
            <div>
              <h2>OCR</h2>
              <p>Extract text from an image (PNG/JPG). PDFs require rasterization (not enabled yet).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="ocrFile">Image file</label>
                <input id="ocrFile" type="file" accept="image/*" />

                <label for="ocrLang">Language (optional)</label>
                <input id="ocrLang" type="text" placeholder="eng" />

                <div class="tool-actions">
                  <button id="ocrRunBtn" class="btn btn-primary" type="button">Run OCR</button>
                </div>

                <label for="ocrOutput">Output</label>
                <textarea id="ocrOutput" placeholder="OCR output will appear here..."></textarea>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                  <div class="viewer-tools">
                    <button class="btn btn-secondary" type="button" data-popout="ocrPreviewFrame">Pop-out</button>
                  </div>
                </div>
                <div class="viewer-wrapper">
                  <div id="ocrPreviewPlaceholder" class="placeholder">Upload an image to preview it here.</div>
                  <iframe id="ocrPreviewFrame" title="OCR input preview"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

<!-- Secure Send -->
<div class="tool-view" data-tool-view="secure_send">
  <div class="tool-header">
    <div>
      <h2>Secure Send</h2>
      <p>Create a secure link for files (stored for up to 7 days). <span class="pill">$3.49 / send</span></p>
    </div>
  </div>

  <div class="tool-body">
    <div class="grid2">
      <div class="card">
        <label for="qtSendFiles">Files</label>
        <input id="qtSendFiles" type="file" multiple />
        <label for="qtSendExpireDays">Link expires</label>
        <select id="qtSendExpireDays">
          <option value="1">1 day</option>
          <option value="3" selected>3 days</option>
          <option value="7">7 days</option>
          <option value="30">30 days</option>
        </select>
        <div class="tool-actions">
          <button id="qtSendCreateBtn" class="btn btn-primary" type="button">Upload &amp; Create Secure Link</button>
        </div>
        <div id="qtSendStatus" class="muted" style="margin-top:10px;"></div>
        <div class="muted" style="margin-top:10px;">Note: You must be logged in to use Secure Send.</div>
      </div>

      <div class="card">
        <label>Secure link</label>
        <div style="display:flex; gap:10px;">
          <input id="qtSendLink" type="text" placeholder="(link will appear here)" readonly />
          <button id="qtSendCopyLink" class="btn btn-secondary" type="button">Copy</button>
        </div>

        <label style="margin-top:12px;">Passcode</label>
        <div style="display:flex; gap:10px;">
          <input id="qtSendPasscode" type="text" placeholder="(passcode will appear here)" readonly />
          <button id="qtSendCopyPasscode" class="btn btn-secondary" type="button">Copy</button>
        </div>

        <div class="muted" style="margin-top:10px;">Share the link + passcode with the recipient.</div>
      </div>
    </div>
  </div>
</div>

<!-- Secure Chat -->
<div class="tool-view" data-tool-view="secure_chat">
  <div class="tool-header" style="display:flex; align-items:flex-start; justify-content:space-between; gap:16px; flex-wrap:wrap;">
    <div>
      <h2>Secure Chat</h2>
      <p>End-to-end encrypted chat in your browser. <span class="pill">$4.99 / hr</span> <span class="pill">AI Notes export is not E2E</span></p>
    </div>

    <div id="qtChatAiAddon" style="min-width:260px; max-width:560px;">
      <div style="display:flex; align-items:center; gap:10px; justify-content:flex-end; flex-wrap:wrap;">
        <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:800;">
          <input id="qtChatAiToggle" type="checkbox" />
          <span>AI PDF Report (Chat Transcript)</span>
        </label>
        <span class="pill">$1.99 / hr + PDF</span>
      </div>
      <div class="muted" style="margin-top:6px;">Not end-to-end encrypted: generating the PDF uploads a <b>decrypted</b> chat transcript to the server.</div>
      <div id="qtChatAiIndicator" class="muted" style="margin-top:6px; display:none;">‚óè AI Notes active</div>
      <div id="qtChatAiStatus" class="muted" style="margin-top:6px;"></div>
      <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
        <button id="qtChatAiFinalizeBtn" class="btn btn-secondary" type="button" disabled>Generate PDF Report</button>
        <button id="qtChatAiDownloadBtn" class="btn btn-primary" type="button" disabled>Download PDF</button>
        <button id="qtChatAiDeleteBtn" class="btn btn-secondary" type="button" disabled>Delete AI Notes</button>
      </div>
    </div>

  </div>

  <div class="tool-body">
    <div class="grid2">
      <div class="card">
        <label for="qtChatName">Display name</label>
        <input id="qtChatName" type="text" placeholder="Your name (optional)" />

        <div class="tool-actions">
          <button id="qtChatCreateBtn" class="btn btn-primary" type="button">Create Chat &amp; Invite</button>
        </div>

        <label style="margin-top:12px;">Invite link</label>
        <div style="display:flex; gap:10px;">
          <input id="qtChatInviteLink" type="text" readonly placeholder="(invite link)" />
          <button id="qtChatCopyInvite" class="btn btn-secondary" type="button">Copy</button>
        </div>

        <label style="margin-top:12px;" for="qtChatInviteToken">Join with invite token or link</label>
        <input id="qtChatInviteToken" type="text" placeholder="Paste invite token or link‚Ä¶" />
        <div class="tool-actions">
          <button id="qtChatJoinBtn" class="btn btn-secondary" type="button">Join</button>
        </div>

        <div id="qtChatStatus" class="muted" style="margin-top:10px;"></div>
      </div>

      <div class="card">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;">
          <div style="font-weight:800;">Messages</div>
        </div>
        <div id="qtChatLog" style="height:320px; overflow:auto; border:1px solid rgba(255,255,255,0.10); border-radius:14px; padding:10px;"></div>
        <div style="display:flex; gap:10px; margin-top:10px;">
          <input id="qtChatMsg" type="text" placeholder="Type a message‚Ä¶" />
          <button id="qtChatSendBtn" class="btn btn-primary" type="button">Send</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Secure Video Chat -->
<div class="tool-view" data-tool-view="secure_video">
  <div class="tool-header" style="display:flex; align-items:flex-start; justify-content:space-between; gap:16px; flex-wrap:wrap;">
    <div>
      <h2>Secure Video Chat</h2>
      <p>Encrypted WebRTC video with guest invite links. <span class="pill">$4.99 / hr</span></p>
    </div>

    <div id="qtVideoAiAddon" style="min-width:260px; max-width:560px;">
      <div style="display:flex; align-items:center; gap:10px; justify-content:flex-end; flex-wrap:wrap;">
        <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:800;">
          <input id="qtVideoAiToggle" type="checkbox" />
          <span>Record + AI PDF (Audio-only)</span>
        </label>
        <span class="pill">$1.99 / hr + PDF</span>
      </div>
      <div id="qtVideoAiIndicator" class="muted" style="margin-top:6px; display:none;">‚óè Recording + AI Notes</div>
      <div id="qtVideoAiStatus" class="muted" style="margin-top:6px;"></div>
      <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
        <button id="qtVideoAiFinalizeBtn" class="btn btn-secondary" type="button" disabled>Generate PDF Report</button>
        <button id="qtVideoAiDownloadBtn" class="btn btn-primary" type="button" disabled>Download PDF</button>
        <button id="qtVideoAiDeleteBtn" class="btn btn-secondary" type="button" disabled>Delete AI Notes</button>
      </div>
    </div>

  </div>

  <div class="tool-body">
    <div class="grid2">
      <div class="card">
        <label for="qtVideoName">Display name</label>
        <input id="qtVideoName" type="text" placeholder="Your name (optional)" />

        <div class="tool-actions">
          <button id="qtVideoCreateBtn" class="btn btn-primary" type="button">Create Room &amp; Invite</button>
        </div>

        <label style="margin-top:12px;">Invite link</label>
        <div style="display:flex; gap:10px;">
          <input id="qtVideoInviteLink" type="text" readonly placeholder="(invite link)" />
          <button id="qtVideoCopyInvite" class="btn btn-secondary" type="button">Copy</button>
        </div>

        <label style="margin-top:12px;" for="qtVideoInviteToken">Join with invite token or link</label>
        <input id="qtVideoInviteToken" type="text" placeholder="Paste invite token or link‚Ä¶" />

        <div class="tool-actions">
          <button id="qtVideoJoinBtn" class="btn btn-secondary" type="button">Join</button>
          <button id="qtVideoStartBtn" class="btn btn-primary" type="button">Start</button>
          <button id="qtVideoHangupBtn" class="btn btn-secondary" type="button">Hang up</button>
        </div>

        <div id="qtVideoStatus" class="muted" style="margin-top:10px;"></div>
      </div>

      <div class="card">
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
          <div>
            <div class="muted" style="margin-bottom:6px;">Local</div>
            <video id="qtVideoLocal" playsinline autoplay muted style="width:100%; border-radius:14px; border:1px solid rgba(255,255,255,0.10); background:#000; aspect-ratio: 4 / 3;"></video>
          </div>
          <div>
            <div class="muted" style="margin-bottom:6px;">Remote</div>
            <video id="qtVideoRemote" playsinline autoplay style="width:100%; border-radius:14px; border:1px solid rgba(255,255,255,0.10); background:#000; aspect-ratio: 4 / 3;"></video>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Secure VoIP -->
<div class="tool-view" data-tool-view="secure_voip">
  <div class="tool-header" style="display:flex; align-items:flex-start; justify-content:space-between; gap:16px; flex-wrap:wrap;">
    <div>
      <h2>Secure VoIP</h2>
      <p>Encrypted WebRTC voice with guest invite links. <span class="pill">$4.99 / hr</span></p>
    </div>

    <div id="qtVoipAiAddon" style="min-width:260px; max-width:560px;">
      <div style="display:flex; align-items:center; gap:10px; justify-content:flex-end; flex-wrap:wrap;">
        <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:800;">
          <input id="qtVoipAiToggle" type="checkbox" />
          <span>Record + AI PDF (Audio-only)</span>
        </label>
        <span class="pill">$1.99 / hr + PDF</span>
      </div>
      <div id="qtVoipAiIndicator" class="muted" style="margin-top:6px; display:none;">‚óè Recording + AI Notes</div>
      <div id="qtVoipAiStatus" class="muted" style="margin-top:6px;"></div>
      <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
        <button id="qtVoipAiFinalizeBtn" class="btn btn-secondary" type="button" disabled>Generate PDF Report</button>
        <button id="qtVoipAiDownloadBtn" class="btn btn-primary" type="button" disabled>Download PDF</button>
        <button id="qtVoipAiDeleteBtn" class="btn btn-secondary" type="button" disabled>Delete AI Notes</button>
      </div>
    </div>

  </div>

  <div class="tool-body">
    <div class="grid2">
      <div class="card">
        <label for="qtVoipName">Display name</label>
        <input id="qtVoipName" type="text" placeholder="Your name (optional)" />

        <div class="tool-actions">
          <button id="qtVoipCreateBtn" class="btn btn-primary" type="button">Create Call &amp; Invite</button>
        </div>

        <label style="margin-top:12px;">Invite link</label>
        <div style="display:flex; gap:10px;">
          <input id="qtVoipInviteLink" type="text" readonly placeholder="(invite link)" />
          <button id="qtVoipCopyInvite" class="btn btn-secondary" type="button">Copy</button>
        </div>

        <label style="margin-top:12px;" for="qtVoipInviteToken">Join with invite token or link</label>
        <input id="qtVoipInviteToken" type="text" placeholder="Paste invite token or link‚Ä¶" />

        <div class="tool-actions">
          <button id="qtVoipJoinBtn" class="btn btn-secondary" type="button">Join</button>
          <button id="qtVoipStartBtn" class="btn btn-primary" type="button">Start</button>
          <button id="qtVoipHangupBtn" class="btn btn-secondary" type="button">Hang up</button>
        </div>

        <div id="qtVoipStatus" class="muted" style="margin-top:10px;"></div>
      </div>

      <div class="card">
        <div class="muted" style="margin-bottom:10px;">Remote audio</div>
        <audio id="qtVoipRemoteAudio" controls autoplay style="width:100%;"></audio>
        <div class="muted" style="margin-top:10px;">Tip: Use headphones to avoid echo.</div>
      </div>
    </div>
  </div>
</div>

<!-- Encrypted Containers -->
<div class="tool-view" data-tool-view="secure_containers">
  <div class="tool-header">
    <div>
      <h2>Encrypted Containers</h2>
      <p>Create a single encrypted container file (PVR1) from local files, and unlock/extract it later.</p>
    </div>
  </div>

  <div class="tool-body">
    <div class="grid2">
      <div class="card">
        <div style="font-weight:900; margin-bottom:8px;">Create container</div>

        <label for="qtContainerPassword">Container password</label>
        <input id="qtContainerPassword" type="password" placeholder="Strong password‚Ä¶" />

        <label for="qtContainerFiles">Files</label>
        <input id="qtContainerFiles" type="file" multiple />

        <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:10px;">
          <label style="display:flex; align-items:center; gap:8px; margin:0;">
            <input id="qtContainerAlsoUpload" type="checkbox" />
            <span class="muted">Upload container to Vault after create (requires login)</span>
          </label>
        </div>

        <div class="tool-actions" style="margin-top:12px;">
          <button id="qtContainerCreateBtn" class="btn btn-primary" type="button">Create Container</button>
          <button id="qtContainerDownloadBtn" class="btn btn-secondary" type="button" disabled>Download</button>
          <button id="qtContainerOfflineBtn" class="btn btn-secondary" type="button">Offline Unlocker</button>
        </div>

        <div id="qtContainerStatus" class="muted" style="margin-top:10px;"></div>
      </div>

      <div class="card">
        <div style="font-weight:900; margin-bottom:8px;">Unlock container</div>

        <label for="qtContainerImportFile">Container file</label>
        <input id="qtContainerImportFile" type="file" accept=".pvr,application/octet-stream" />

        <label for="qtContainerImportPassword">Password</label>
        <input id="qtContainerImportPassword" type="password" placeholder="Password‚Ä¶" />

        <div class="tool-actions" style="margin-top:12px;">
          <button id="qtContainerUnlockBtn" class="btn btn-primary" type="button">Unlock</button>
          <button id="qtContainerExtractBtn" class="btn btn-secondary" type="button" disabled>Extract to Vault</button>
        </div>

        <div id="qtContainerImportStatus" class="muted" style="margin-top:10px;"></div>

        <div style="margin-top:12px; border-top:1px solid rgba(255,255,255,0.10); padding-top:12px;">
          <div class="muted" style="margin-bottom:6px;">Files in container</div>
          <div style="max-height: 220px; overflow:auto; border:1px solid rgba(255,255,255,0.10); border-radius:14px;">
            <table style="width:100%; border-collapse:collapse;">
              <thead>
                <tr style="text-align:left; font-size:0.9rem; color:var(--muted);">
                  <th style="padding:10px;">Name</th>
                  <th style="padding:10px;">Type</th>
                  <th style="padding:10px;">Size</th>
                  <th style="padding:10px;"></th>
                </tr>
              </thead>
              <tbody id="qtContainerPreviewTbody">
                <tr><td colspan="4" style="padding:10px; color:var(--muted); font-size:0.9rem;">No container loaded.</td></tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

        
<!-- Breakthrough Tools Roadmap -->
<div class="tool-view" data-tool-view="breakthrough">
  <div class="tool-header" style="display:flex; align-items:flex-start; justify-content:space-between; gap:16px; flex-wrap:wrap;">
    <div>
      <h2>üöÄ Breakthrough Tools</h2>
      <p>These compound into document truth infrastructure. Now grouped under Document Governance.</p>
    </div>
    <div class="pill">Roadmap</div>
  </div>

  <div class="tool-body">
    <div class="grid2">
      <div class="card">
        <div class="muted" style="margin-bottom:10px; font-weight:800;">Modules</div>
        <div style="display:flex; flex-direction:column; gap:10px;">
          <button class="btn btn-secondary bt-tab" type="button" data-bt="hash">1Ô∏è‚É£ Hash Evidence Machine</button>
          <button class="btn btn-secondary bt-tab" type="button" data-bt="timetravel">2Ô∏è‚É£ PDF Time Travel‚Ñ¢</button>
          <button class="btn btn-secondary bt-tab" type="button" data-bt="interrogation">3Ô∏è‚É£ PDF Interrogation Mode‚Ñ¢</button>
          <button class="btn btn-secondary bt-tab" type="button" data-bt="constitution">4Ô∏è‚É£ Document Constitution</button>
          <button class="btn btn-secondary bt-tab" type="button" data-bt="sentience">5Ô∏è‚É£ PDF Sentience Mode‚Ñ¢</button>
          <button class="btn btn-secondary bt-tab" type="button" data-bt="immortal">6Ô∏è‚É£ Immortal Documents‚Ñ¢</button>
          <button class="btn btn-secondary bt-tab" type="button" data-bt="moat">7Ô∏è‚É£ Evidence Graph & API</button>
        </div>

        <div style="margin-top:14px; padding-top:14px; border-top:1px solid rgba(255,255,255,0.12);">
          <div class="muted" style="font-weight:900; margin-bottom:8px;">Build Order</div>
          <ol class="muted" style="margin:0 0 0 18px; padding:0; line-height:1.5;">
            <li>Hash Evidence Machine</li>
            <li>Time Travel</li>
            <li>Document Constitution</li>
            <li>Interrogation Mode</li>
            <li>Sentience Mode</li>
            <li>Immortal / Threshold Reconstruction</li>
            <li>Evidence Graph & API</li>
          </ol>
        </div>
      </div>

      <div class="card">
        <style>
          .bt-section { display:none; }
          .bt-section.bt-active { display:block; }
          .bt-section h3 { margin-top:0; }
          .bt-phase { margin:10px 0; padding:10px 12px; border:1px solid rgba(255,255,255,0.12); border-radius:12px; background:rgba(255,255,255,0.03); }
          .bt-phase b { display:block; margin-bottom:6px; }
          .bt-tab.bt-active { outline:2px solid rgba(255,255,255,0.18); }
        </style>

        <div class="bt-section bt-active" data-bt-section="hash">
          <h3>1Ô∏è‚É£ Hash Evidence Machine (Foundation)</h3>
          <p class="muted">Everything else depends on this. PDFs become legal objects, not files.</p>

          <div class="bt-phase">
            <b>Phase 1 ‚Äî Evidence Core</b>
            <ul class="muted">
              <li>Immutable original artifact storage</li>
              <li>SHA-256 hashing on ingest</li>
              <li>Trusted timestamping (TSA / anchor-ready)</li>
              <li>Append-only event log (who/what/when)</li>
              <li>Manual ‚ÄúExport Evidence Bundle‚Äù</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 2 ‚Äî Court Mode</b>
            <ul class="muted">
              <li>One-click Court Export</li>
              <li>Self-verifying bundle (original, hash, timestamp, event log)</li>
              <li>Verification instructions</li>
              <li>Loss detection (prove deletion / mismatch)</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 3 ‚Äî Automation</b>
            <ul class="muted">
              <li>Auto-evidence on key actions (sign, send, finalize)</li>
              <li>Evidence bundle versioning</li>
              <li>Evidence ID referencing across workflows</li>
            </ul>
          </div>
        </div>

        <div class="bt-section" data-bt-section="timetravel">
          <h3>2Ô∏è‚É£ PDF Time Travel‚Ñ¢ (Document Replay Mode)</h3>
          <p class="muted">Truth, made visual. ‚ÄúNo he didn‚Äôt‚Äù becomes undeniable.</p>

          <div class="bt-phase">
            <b>Phase 1 ‚Äî Event Timeline</b>
            <ul class="muted">
              <li>Chronological list of document events</li>
              <li>Diff-based view (before/after)</li>
              <li>Actor + timestamp visibility</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 2 ‚Äî Replay Generation</b>
            <ul class="muted">
              <li>Event-derived MP4 replay</li>
              <li>Visual highlights (edits, page changes, signatures)</li>
              <li>Replay cryptographically bound to original hash</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 3 ‚Äî Embedded / Interactive</b>
            <ul class="muted">
              <li>Optional embedded replay inside PDF</li>
              <li>Interactive scrubber (where supported)</li>
              <li>Fallback to external MP4</li>
            </ul>
          </div>
        </div>

        <div class="bt-section" data-bt-section="interrogation">
          <h3>3Ô∏è‚É£ PDF Interrogation Mode‚Ñ¢</h3>
          <p class="muted">Forensic questioning, not chat. Documents explain themselves under oath.</p>

          <div class="bt-phase">
            <b>Phase 1 ‚Äî Evidence-Aware Q&amp;A</b>
            <ul class="muted">
              <li>Ask questions about the document</li>
              <li>Answers must cite event IDs, versions, timestamps, actors</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 2 ‚Äî Intent &amp; Risk Analysis</b>
            <ul class="muted">
              <li>Detect suspicious changes</li>
              <li>Flag late-stage edits</li>
              <li>Highlight clauses added under pressure</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 3 ‚Äî Court / Compliance Lens</b>
            <ul class="muted">
              <li>‚ÄúExplain this document to a judge‚Äù</li>
              <li>‚ÄúWhat changed after approval?‚Äù</li>
              <li>Export interrogation report as evidence</li>
            </ul>
          </div>
        </div>

        <div class="bt-section" data-bt-section="constitution">
          <h3>4Ô∏è‚É£ Document Constitution (Multi‚ÄëParty Governance)</h3>
          <p class="muted">Board rules, enforced by math. Documents cannot be changed without legitimate authority.</p>

          <div class="bt-phase">
            <b>Phase 1 ‚Äî Policy Locking</b>
            <ul class="muted">
              <li>Declare constitution: roles, thresholds (M-of-N)</li>
              <li>Lock sections</li>
              <li>Prevent unauthorized edits</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 2 ‚Äî Change Proposals</b>
            <ul class="muted">
              <li>All edits become proposals</li>
              <li>Required signers notified</li>
              <li>Cryptographic approval events logged</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 3 ‚Äî Quorum &amp; Sessions</b>
            <ul class="muted">
              <li>Governance sessions (‚Äúall present‚Äù)</li>
              <li>Time locks &amp; expirations</li>
              <li>Break-glass clauses with escalation</li>
            </ul>
          </div>
        </div>

        <div class="bt-section" data-bt-section="sentience">
          <h3>5Ô∏è‚É£ PDF Sentience Mode‚Ñ¢</h3>
          <p class="muted">Documents enforce intent. They defend themselves.</p>

          <div class="bt-phase">
            <b>Phase 1 ‚Äî Intent Declaration</b>
            <ul class="muted">
              <li>Declare document purpose and constraints</li>
              <li>Bind intent to document hash</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 2 ‚Äî Enforcement</b>
            <ul class="muted">
              <li>Detect intent drift</li>
              <li>Refuse invalid transformations</li>
              <li>Auto-flag violations</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 3 ‚Äî Self-Reporting</b>
            <ul class="muted">
              <li>Notify stakeholders of violations</li>
              <li>Enter dispute mode automatically</li>
              <li>Escalate to governance / evidence workflows</li>
            </ul>
          </div>
        </div>

        <div class="bt-section" data-bt-section="immortal">
          <h3>6Ô∏è‚É£ Immortal Documents‚Ñ¢ (Honest Version)</h3>
          <p class="muted">Truth survives platforms. Documents cannot be silently erased.</p>

          <div class="bt-phase">
            <b>Phase 1 ‚Äî Self-Verifying Bundles</b>
            <ul class="muted">
              <li>Document + hash + timestamp + instructions</li>
              <li>Independent verification without PDFRealm</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 2 ‚Äî Survivability</b>
            <ul class="muted">
              <li>Optional redundant storage</li>
              <li>Evidence anchoring (multiple TSAs / public anchors)</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 3 ‚Äî Threshold Reconstruction (Opt‚ÄëIn)</b>
            <ul class="muted">
              <li>Encrypted doc/key</li>
              <li>Secret sharing (K-of-N)</li>
              <li>Distributed shard custody</li>
            </ul>
          </div>
        </div>

        <div class="bt-section" data-bt-section="moat">
          <h3>7Ô∏è‚É£ Hash Evidence Machine v2 (The Moat)</h3>
          <p class="muted">Everything converges: replays, interrogations, governance, sentience, immortality.</p>

          <div class="bt-phase">
            <b>Phase 1 ‚Äî Unified Evidence Graph</b>
            <ul class="muted">
              <li>Link replays, interrogations, approvals, sentience events</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 2 ‚Äî Cross-Document Proof</b>
            <ul class="muted">
              <li>Parent/child lineage</li>
              <li>Trust inheritance across derivatives</li>
            </ul>
          </div>
          <div class="bt-phase">
            <b>Phase 3 ‚Äî Evidence-as-API</b>
            <ul class="muted">
              <li>Evidence verification endpoints</li>
              <li>Third-party validation</li>
              <li>Licensing opportunity</li>
            </ul>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Pages ‚Üí ZIP (one PDF per page) -->
        <div class="tool-view" data-tool-view="pageszip">
          <div class="tool-header">
            <div>
              <h2>Pages ‚Üí ZIP</h2>
              <p>Create a ZIP containing one PDF per page (page-0001.pdf, page-0002.pdf, ...).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="pagesZipPdfFile">PDF file</label>
                <input id="pagesZipPdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="pagesZipPdfPassword">Password (if encrypted)</label>
                    <input id="pagesZipPdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="pagesZipUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <div style="margin-top:12px;">
                  <label for="pagesZipRanges">Pages to export (optional)</label>
                  <input id="pagesZipRanges" type="text" placeholder="All pages (or e.g., 1-3,7,10-12)" />
                  <div class="hint" style="margin-top:6px;">If empty, exports all pages. Selecting thumbnails auto-fills this box.</div>
                </div>

                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="pagesZipFormat">Format</label>
                    <select id="pagesZipFormat">
                      <option value="pdf" selected>PDF (one PDF per page)</option>
                      <option value="png">PNG (one image per page)</option>
                      <option value="jpg">JPG (one image per page)</option>
                    </select>
                  </div>
                  <div style="flex:1;min-width:220px;">
                    <label for="pagesZipNameTemplate">Filename template</label>
                    <input id="pagesZipNameTemplate" type="text" value="{base}_p{page:0000}.{ext}" />
                  </div>
                </div>

                <div class="mini-actions">
                  <button id="pagesZipSelectAllBtn" class="btn btn-secondary" type="button">Select all</button>
                  <button id="pagesZipClearSelBtn" class="btn btn-secondary" type="button">Clear</button>
                  <button id="pagesZipSelectOddsBtn" class="btn btn-secondary" type="button">Odds</button>
                  <button id="pagesZipSelectEvensBtn" class="btn btn-secondary" type="button">Evens</button>
                </div>

                <div id="pagesZipThumbStrip" class="page-strip" style="margin-top:10px;">
                  <div class="muted">Upload a PDF to generate selectable pages.</div>
                </div>

                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="pagesZipBtn" class="btn btn-primary" type="button">Create ZIP</button>
                </div>

                <div id="pagesZipStatus" class="hint" style="margin-top:10px;"></div>
              </div>

              <div class="card">
                <h3>How it works</h3>
                <p class="muted">
                  The ZIP is created in your browser using PDF-Lib + JSZip.
                  If your PDF is encrypted, use Decrypt/Unlock first.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Sanitize Metadata (deep rebuild) -->
        <div class="tool-view" data-tool-view="metasanitize">
          <div class="tool-header">
            <div>
              <h2>Sanitize</h2>
              <p>Deep-sanitize metadata by rebuilding the PDF (copies pages into a new file).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="metaSanitizePdfFile">PDF file</label>
                <input id="metaSanitizePdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="metaSanitizePdfPassword">Password (if encrypted)</label>
                    <input id="metaSanitizePdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="metaSanitizeUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="metaSanitizeBtn" class="btn btn-primary" type="button">Sanitize &amp; Export</button>
                </div>

                <div id="metaSanitizeStatus" class="hint" style="margin-top:10px;"></div>
              </div>

              <div class="card">
                <h3>Notes</h3>
                <p class="muted">
                  This removes common metadata fields and rebuilds the PDF object structure by copying pages into a new file.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Rasterize (image-only PDF) -->
        <div class="tool-view" data-tool-view="rasterize">
          <div class="tool-header">
            <div>
              <h2>Rasterize</h2>
              <p>Create an image-only PDF (useful for finalizing/redaction lock-in). Requires Ghostscript on the server.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="rasterizePdfFile">PDF file</label>
                <input id="rasterizePdfFile" type="file" accept="application/pdf" />

                <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap;margin-top:10px;">
                  <div style="flex:1;min-width:220px;">
                    <label for="rasterizePdfPassword">Password (if encrypted)</label>
                    <input id="rasterizePdfPassword" type="password" placeholder="Password" autocomplete="off" />
                  </div>
                  <div>
                    <button id="rasterizeUnlockBtn" class="btn btn-secondary" type="button">Decrypt / Unlock</button>
                  </div>
                </div>

                <label for="rasterizeDpi" style="margin-top:10px;">DPI</label>
                <input id="rasterizeDpi" type="number" value="150" min="72" max="600" />

                <div class="tool-actions" style="gap:10px;flex-wrap:wrap;margin-top:12px;">
                  <button id="rasterizeBtn" class="btn btn-primary" type="button">Rasterize &amp; Export</button>
                </div>

                <div id="rasterizeStatus" class="hint" style="margin-top:10px;"></div>
              </div>

              <div class="card">
                <h3>Heads up</h3>
                <p class="muted">
                  Image-only PDFs can be much larger. Higher DPI increases quality and size.
                </p>
              </div>
            </div>
          </div>
        </div>

      
        <!-- PDFREALM_PACK3_TOOLVIEWS_V1 -->
        <div class="tool-view" data-tool-view="xml2pdf">
          <div class="tool-header">
            <div>
              <h2>XML ‚Üí PDF</h2>
              <p>Paste XML (or upload an .xml file) and export a PDF. (Client-side; no Docker needed.)</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="xml2pdfFile">XML file (optional)</label>
                  <input id="xml2pdfFile" type="file" accept=".xml,text/xml,application/xml" />

                  <label for="xml2pdfText" style="margin-top:10px;">XML text</label>
                  <textarea id="xml2pdfText" rows="10" style="width:100%;"></textarea>

                  <div class="tool-actions">
                    <button id="xml2pdfBuildBtn" class="btn btn-secondary" type="button">Build PDF</button>
                    <button id="xml2pdfDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>

                  <div id="xml2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="xml2pdfPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2md">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí Markdown</h2>
              <p>Extract the text layer of a PDF and export as .md (best-effort; scans need OCR first).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdf2mdFile">PDF file</label>
                  <input id="pdf2mdFile" type="file" accept="application/pdf" />

                  <div class="tool-actions">
                    <button id="pdf2mdRunBtn" class="btn btn-secondary" type="button">Convert</button>
                    <button id="pdf2mdDownloadBtn" class="btn" type="button" disabled>Download .md</button>
                  </div>

                  <div id="pdf2mdStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Output</div>
                </div>
                <textarea id="pdf2mdOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2html">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí HTML</h2>
              <p>Extract the text layer of a PDF and export a simple HTML file (best-effort; scans need OCR first).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdf2htmlFile">PDF file</label>
                  <input id="pdf2htmlFile" type="file" accept="application/pdf" />

                  <div class="tool-actions">
                    <button id="pdf2htmlRunBtn" class="btn btn-secondary" type="button">Convert</button>
                    <button id="pdf2htmlDownloadBtn" class="btn" type="button" disabled>Download .html</button>
                  </div>

                  <div id="pdf2htmlStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Output</div>
                </div>
                <textarea id="pdf2htmlOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2json">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí JSON</h2>
              <p>Extract PDF form fields (and basic info) into JSON using PDF-Lib in the browser.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdf2jsonFile">PDF file</label>
                  <input id="pdf2jsonFile" type="file" accept="application/pdf" />

                  <div class="tool-actions">
                    <button id="pdf2jsonRunBtn" class="btn btn-secondary" type="button">Extract</button>
                    <button id="pdf2jsonDownloadBtn" class="btn" type="button" disabled>Download .json</button>
                  </div>

                  <div id="pdf2jsonStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Output</div>
                </div>
                <pre id="pdf2jsonOut" style="margin:0;white-space:pre-wrap;max-height:520px;overflow:auto;"></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="extractimgzip">
          <div class="tool-header">
            <div>
              <h2>Extract Images ZIP</h2>
              <p>Exports each PDF page as an image and zips them. (v1 renders pages; embedded-image extraction comes later.)</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="extractimgzipFile">PDF file</label>
                  <input id="extractimgzipFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;align-items:center;margin-top:10px;flex-wrap:wrap;">
                    <div style="min-width:160px;">
                      <label for="extractimgzipScale" class="muted">Scale</label>
                      <input id="extractimgzipScale" type="number" value="1.5" min="0.5" max="4" step="0.1" style="width:120px;" />
                    </div>
                    <div style="min-width:160px;">
                      <label for="extractimgzipFormat" class="muted">Format</label>
                      <select id="extractimgzipFormat" style="width:140px;">
                        <option value="png" selected>PNG</option>
                        <option value="jpg">JPG</option>
                      </select>
                    </div>
                    <div style="min-width:160px;">
                      <label for="extractimgzipMaxPages" class="muted">Max pages</label>
                      <input id="extractimgzipMaxPages" type="number" value="50" min="1" step="1" style="width:120px;" />
                    </div>
                  </div>

                  <div class="tool-actions">
                    <button id="extractimgzipRunBtn" class="btn btn-secondary" type="button">Extract + ZIP</button>
                    <button id="extractimgzipDownloadBtn" class="btn" type="button" disabled>Download .zip</button>
                  </div>

                  <div id="extractimgzipStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:auto;max-height:560px;">
                  <div id="extractimgzipPreview" class="muted" style="padding:12px;">No preview yet.</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_PACK3_TOOLVIEWS_V1 -->

        <!-- PDFREALM_PACK4_TOOLVIEWS_V1 -->
        <div class="tool-view" data-tool-view="eml2pdf">
          <div class="tool-header">
            <div>
              <h2>Email (.eml) ‚Üí PDF</h2>
              <p>Convert an .eml email into a PDF (headers + best-effort body). Client-side.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="eml2pdfFile">.eml file</label>
                  <input id="eml2pdfFile" type="file" accept=".eml,message/rfc822,text/plain" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="eml2pdfBuildBtn" class="btn btn-secondary" type="button">Build PDF</button>
                    <button id="eml2pdfDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>

                  <div id="eml2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="eml2pdfPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="heic2pdf">
          <div class="tool-header">
            <div>
              <h2>HEIC ‚Üí PDF</h2>
              <p>Convert iPhone HEIC photos into a PDF (one image per page). Client-side.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="heic2pdfFiles">HEIC files</label>
                  <input id="heic2pdfFiles" type="file" accept=".heic,.heif,image/heic,image/heif" multiple />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="heic2pdfBuildBtn" class="btn btn-secondary" type="button">Build PDF</button>
                    <button id="heic2pdfDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>

                  <div id="heic2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="heic2pdfPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="zip2pdf">
          <div class="tool-header">
            <div>
              <h2>ZIP ‚Üí PDF</h2>
              <p>Drop a ZIP of JPG/PNG images (and optional text files) and export a single PDF. Client-side.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="zip2pdfFile">ZIP file</label>
                  <input id="zip2pdfFile" type="file" accept=".zip,application/zip,application/x-zip-compressed" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="zip2pdfBuildBtn" class="btn btn-secondary" type="button">Build PDF</button>
                    <button id="zip2pdfDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>

                  <div id="zip2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="zip2pdfPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2csv">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí CSV</h2>
              <p>Best-effort conversion using the PDF text layer. Output columns: page,line,text (v1). Scans need OCR first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdf2csvFile">PDF file</label>
                  <input id="pdf2csvFile" type="file" accept="application/pdf" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="pdf2csvRunBtn" class="btn btn-secondary" type="button">Convert</button>
                    <button id="pdf2csvDownloadBtn" class="btn" type="button" disabled>Download .csv</button>
                  </div>

                  <div id="pdf2csvStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Output</div>
                </div>
                <textarea id="pdf2csvOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2txt">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí TXT</h2>
              <p>Extract the PDF text layer and export a .txt file (v1). Scans need OCR first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdf2txtFile">PDF file</label>
                  <input id="pdf2txtFile" type="file" accept="application/pdf" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="pdf2txtRunBtn" class="btn btn-secondary" type="button">Convert</button>
                    <button id="pdf2txtDownloadBtn" class="btn" type="button" disabled>Download .txt</button>
                  </div>

                  <div id="pdf2txtStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Output</div>
                </div>
                <textarea id="pdf2txtOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_PACK4_TOOLVIEWS_V1 -->

        <!-- PDFREALM_PACK7_TOOLVIEWS_V1 -->

        <div class="tool-view" data-tool-view="smartcompress">
          <div class="tool-header"><div><h2>Smart Compress (v1)</h2><p>Raster-compress scanned PDFs (DPI + JPEG quality) and rebuild.</p></div></div>
          <div class="tool-body">
            <div class="card">
              <label for="smartcompressFile">PDF file</label>
              <input id="smartcompressFile" type="file" accept="application/pdf" />
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                <div style="flex:1;min-width:160px;"><label for="smartcompressDpi">DPI</label><input id="smartcompressDpi" type="number" value="150" min="72" max="300" /></div>
                <div style="flex:1;min-width:160px;"><label for="smartcompressQuality">JPEG quality</label><input id="smartcompressQuality" type="number" value="0.80" step="0.05" min="0.10" max="1.0" /></div>
              </div>
              <div class="tool-actions" style="margin-top:12px;">
                <button id="smartcompressRunBtn" class="btn btn-secondary" type="button">Compress</button>
                <button id="smartcompressDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
              </div>
              <div id="smartcompressStatus" class="muted" style="margin-top:10px;"></div>
            </div>
            <div class="card viewer-card" style="margin-top:14px;">
              <div class="viewer-top"><div class="viewer-title">Preview</div></div>
              <iframe id="smartcompressPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="deskewclean">
          <div class="tool-header"><div><h2>Deskew + Clean (v1)</h2><p>Manual deskew (-5..5¬∞) + threshold cleanup. Rebuild to PDF.</p></div></div>
          <div class="tool-body">
            <div class="card">
              <label for="deskewcleanFile">PDF file</label>
              <input id="deskewcleanFile" type="file" accept="application/pdf" />
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                <div style="flex:1;min-width:160px;"><label for="deskewcleanDpi">DPI</label><input id="deskewcleanDpi" type="number" value="200" min="72" max="300" /></div>
                <div style="flex:1;min-width:160px;"><label for="deskewcleanRotate">Rotate degrees</label><input id="deskewcleanRotate" type="number" value="0" step="0.5" min="-5" max="5" /></div>
              </div>
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                <div style="flex:1;min-width:160px;"><label for="deskewcleanThresh">Threshold</label><input id="deskewcleanThresh" type="number" value="200" min="0" max="255" /></div>
                <div style="flex:1;min-width:160px;"><label for="deskewcleanQuality">JPEG quality</label><input id="deskewcleanQuality" type="number" value="0.85" step="0.05" min="0.10" max="1.0" /></div>
              </div>
              <div class="tool-actions" style="margin-top:12px;">
                <button id="deskewcleanRunBtn" class="btn btn-secondary" type="button">Clean PDF</button>
                <button id="deskewcleanDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
              </div>
              <div id="deskewcleanStatus" class="muted" style="margin-top:10px;"></div>
            </div>
            <div class="card viewer-card" style="margin-top:14px;">
              <div class="viewer-top"><div class="viewer-title">Preview</div></div>
              <iframe id="deskewcleanPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2pptx">
          <div class="tool-header"><div><h2>PDF ‚Üí PPTX (v1)</h2><p>Each PDF page becomes a slide background image.</p></div></div>
          <div class="tool-body">
            <div class="card">
              <label for="pdf2pptxFile">PDF file</label>
              <input id="pdf2pptxFile" type="file" accept="application/pdf" />
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                <div style="flex:1;min-width:160px;"><label for="pdf2pptxDpi">Render DPI</label><input id="pdf2pptxDpi" type="number" value="144" min="72" max="240" /></div>
              </div>
              <div class="tool-actions" style="margin-top:12px;">
                <button id="pdf2pptxRunBtn" class="btn btn-secondary" type="button">Convert</button>
                <button id="pdf2pptxDownloadBtn" class="btn" type="button" disabled>Download .pptx</button>
              </div>
              <div id="pdf2pptxStatus" class="muted" style="margin-top:10px;"></div>
            </div>
            <div class="card" style="margin-top:14px;">
              <div class="viewer-top"><div class="viewer-title">Log</div></div>
              <textarea id="pdf2pptxLog" rows="14" style="width:100%;"></textarea>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="extractembedded">
          <div class="tool-header"><div><h2>Extract Embedded Images (v1)</h2><p>Best-effort extraction of image XObjects to a ZIP of PNGs.</p></div></div>
          <div class="tool-body">
            <div class="card">
              <label for="extractembeddedFile">PDF file</label>
              <input id="extractembeddedFile" type="file" accept="application/pdf" />
              <div class="tool-actions" style="margin-top:12px;">
                <button id="extractembeddedRunBtn" class="btn btn-secondary" type="button">Extract</button>
                <button id="extractembeddedDownloadBtn" class="btn" type="button" disabled>Download ZIP</button>
              </div>
              <div id="extractembeddedStatus" class="muted" style="margin-top:10px;"></div>
            </div>
            <div class="card" style="margin-top:14px;">
              <div class="viewer-top"><div class="viewer-title">Log</div></div>
              <textarea id="extractembeddedLog" rows="14" style="width:100%;"></textarea>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="visualdiff">
          <div class="tool-header"><div><h2>Visual Diff (v1)</h2><p>Pixel-level diff renders ‚Üí ZIP of diff PNGs + summary.</p></div></div>
          <div class="tool-body">
            <div class="card">
              <label for="visualdiffA">PDF A</label>
              <input id="visualdiffA" type="file" accept="application/pdf" />
              <label for="visualdiffB" style="margin-top:10px;">PDF B</label>
              <input id="visualdiffB" type="file" accept="application/pdf" />
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                <div style="flex:1;min-width:160px;"><label for="visualdiffDpi">Render DPI</label><input id="visualdiffDpi" type="number" value="120" min="72" max="200" /></div>
                <div style="flex:1;min-width:160px;"><label for="visualdiffThreshold">Diff threshold</label><input id="visualdiffThreshold" type="number" value="18" min="0" max="255" /></div>
              </div>
              <div class="tool-actions" style="margin-top:12px;">
                <button id="visualdiffRunBtn" class="btn btn-secondary" type="button">Compare</button>
                <button id="visualdiffDownloadBtn" class="btn" type="button" disabled>Download ZIP</button>
              </div>
              <div id="visualdiffStatus" class="muted" style="margin-top:10px;"></div>
            </div>
            <div class="card" style="margin-top:14px;">
              <div class="viewer-top"><div class="viewer-title">Summary</div></div>
              <textarea id="visualdiffLog" rows="14" style="width:100%;"></textarea>
            </div>
          </div>
        </div>

        <!-- /PDFREALM_PACK7_TOOLVIEWS_V1 -->

        <!-- PDFREALM_PACK8_TOOLVIEWS_V1 -->
        <div class="tool-view" data-tool-view="templaterun">
          <div class="tool-header">
            <div>
              <h2>Template Runner (v1)</h2>
              <p>Fill a PDF form template using a JSON file. Great for invoices, BOLs, rate cons, etc. (AcroForm fields)</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="templaterunTemplate">Template PDF (fillable)</label>
                  <input id="templaterunTemplate" type="file" accept="application/pdf" />

                  <label style="margin-top:10px;" for="templaterunJson">Data JSON</label>
                  <input id="templaterunJson" type="file" accept="application/json,.json,text/plain" />

                  <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                    <label style="display:flex;align-items:center;gap:8px;">
                      <input id="templaterunFlatten" type="checkbox" />
                      Flatten output (make uneditable)
                    </label>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="templaterunListBtn" class="btn btn-secondary" type="button">List Fields</button>
                    <button id="templaterunRunBtn" class="btn btn-secondary" type="button">Run Template</button>
                    <button id="templaterunDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>

                  <div id="templaterunStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card">
                  <div class="viewer-top">
                    <div class="viewer-title">Field Map</div>
                  </div>
                  <textarea id="templaterunFields" rows="10" style="width:100%;"></textarea>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="templaterunPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="batchrename">
          <div class="tool-header">
            <div>
              <h2>Batch Rename by Content (v1)</h2>
              <p>Generates a suggested filename from the PDF text layer (first pages). Exports a copy with that name.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="batchrenameFile">PDF file</label>
                  <input id="batchrenameFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:160px;">
                      <label for="batchrenamePages">Pages to sample</label>
                      <input id="batchrenamePages" type="number" value="2" min="1" max="10" />
                    </div>
                    <div style="flex:1;min-width:160px;">
                      <label for="batchrenameWords">Top keywords</label>
                      <input id="batchrenameWords" type="number" value="5" min="3" max="12" />
                    </div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="batchrenameRunBtn" class="btn btn-secondary" type="button">Suggest Name</button>
                    <button id="batchrenameDownloadBtn" class="btn" type="button" disabled>Download Renamed</button>
                  </div>

                  <div id="batchrenameStatus" class="muted" style="margin-top:10px;"></div>
                </div>

                <div class="card">
                  <div class="viewer-top">
                    <div class="viewer-title">Suggested filename</div>
                  </div>
                  <input id="batchrenameOut" type="text" style="width:100%;" />
                  <div class="muted" style="margin-top:8px;">You can edit the suggested name before downloading.</div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Sample text</div>
                </div>
                <textarea id="batchrenameSample" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="extractattach">
          <div class="tool-header">
            <div>
              <h2>Extract Attachments (v1)</h2>
              <p>Extract embedded attachments from the PDF (EmbeddedFiles). Downloads a ZIP of attachments.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="extractattachFile">PDF file</label>
                  <input id="extractattachFile" type="file" accept="application/pdf" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="extractattachRunBtn" class="btn btn-secondary" type="button">Extract</button>
                    <button id="extractattachDownloadBtn" class="btn" type="button" disabled>Download ZIP</button>
                  </div>

                  <div id="extractattachStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Log</div>
                </div>
                <textarea id="extractattachLog" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="extractfonts">
          <div class="tool-header">
            <div>
              <h2>Extract Fonts (v1)</h2>
              <p>Inventory of fonts found in the PDF text layer. Downloads a ZIP with JSON/CSV/TXT reports.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="extractfontsFile">PDF file</label>
                  <input id="extractfontsFile" type="file" accept="application/pdf" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="extractfontsRunBtn" class="btn btn-secondary" type="button">Analyze</button>
                    <button id="extractfontsDownloadBtn" class="btn" type="button" disabled>Download ZIP</button>
                  </div>

                  <div id="extractfontsStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Report</div>
                </div>
                <textarea id="extractfontsOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2epub">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí EPUB (v1)</h2>
              <p>Text-only EPUB export from the PDF text layer (best-effort). Scans need OCR first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdf2epubFile">PDF file</label>
                  <input id="pdf2epubFile" type="file" accept="application/pdf" />

                  <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;">
                    <div style="flex:1;min-width:160px;">
                      <label for="pdf2epubTitle">Title</label>
                      <input id="pdf2epubTitle" type="text" value="PDFRealm Export" />
                    </div>
                    <div style="flex:1;min-width:160px;">
                      <label for="pdf2epubAuthor">Author</label>
                      <input id="pdf2epubAuthor" type="text" value="" />
                    </div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="pdf2epubRunBtn" class="btn btn-secondary" type="button">Build EPUB</button>
                    <button id="pdf2epubDownloadBtn" class="btn" type="button" disabled>Download .epub</button>
                  </div>

                  <div id="pdf2epubStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview text (sample)</div>
                </div>
                <textarea id="pdf2epubPreview" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_PACK8_TOOLVIEWS_V1 -->

        <!-- PDFREALM_PACK11_TOOLVIEWS_V1 -->
        <div class="tool-view" data-tool-view="epub2pdf">
          <div class="tool-header">
            <div>
              <h2>EPUB ‚Üí PDF</h2>
              <p>Best-effort EPUB text extraction into a printable PDF (v1). Client-side.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="epub2pdfFile">EPUB file</label>
                  <input id="epub2pdfFile" type="file" accept=".epub,application/epub+zip" />
                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="epub2pdfBuildBtn" class="btn btn-secondary" type="button">Build PDF</button>
                    <button id="epub2pdfDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="epub2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="epub2pdfPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="qrbarcode">
          <div class="tool-header">
            <div>
              <h2>Add QR / Barcode</h2>
              <p>Stamp a QR code or Code128 barcode onto every page of a PDF (v1). Client-side.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="qrbarcodePdf">PDF file</label>
                  <input id="qrbarcodePdf" type="file" accept="application/pdf" />
                  <label for="qrbarcodeText" style="margin-top:10px;">Text / URL</label>
                  <input id="qrbarcodeText" type="text" placeholder="https://... or any text" />
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="qrbarcodeType">Type</label>
                      <select id="qrbarcodeType">
                        <option value="qr">QR</option>
                        <option value="code128">Code128</option>
                      </select>
                    </div>
                    <div>
                      <label for="qrbarcodePos">Position</label>
                      <select id="qrbarcodePos">
                        <option value="br">Bottom-right</option>
                        <option value="bl">Bottom-left</option>
                        <option value="tr">Top-right</option>
                        <option value="tl">Top-left</option>
                        <option value="c">Center</option>
                      </select>
                    </div>
                  </div>
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="qrbarcodeSize">Size (pts)</label>
                      <input id="qrbarcodeSize" type="number" min="40" max="360" value="120" />
                    </div>
                    <div>
                      <label for="qrbarcodeMargin">Margin (pts)</label>
                      <input id="qrbarcodeMargin" type="number" min="0" max="100" value="24" />
                    </div>
                  </div>
                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="qrbarcodeRunBtn" class="btn btn-secondary" type="button">Stamp PDF</button>
                    <button id="qrbarcodeDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="qrbarcodeStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="qrbarcodePreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="bulkqrbarcode">
          <div class="tool-header">
            <div>
              <h2>Bulk QR / Barcode ‚Üí ZIP</h2>
              <p>Stamp multiple PDFs and download a ZIP of stamped PDFs (v1). Client-side.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="bulkqrFiles">PDF files</label>
                  <input id="bulkqrFiles" type="file" accept="application/pdf" multiple />
                  <label for="bulkqrText" style="margin-top:10px;">Text / URL</label>
                  <input id="bulkqrText" type="text" placeholder="https://... or any text" />
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="bulkqrType">Type</label>
                      <select id="bulkqrType">
                        <option value="qr">QR</option>
                        <option value="code128">Code128</option>
                      </select>
                    </div>
                    <div>
                      <label for="bulkqrPos">Position</label>
                      <select id="bulkqrPos">
                        <option value="br">Bottom-right</option>
                        <option value="bl">Bottom-left</option>
                        <option value="tr">Top-right</option>
                        <option value="tl">Top-left</option>
                        <option value="c">Center</option>
                      </select>
                    </div>
                  </div>
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="bulkqrSize">Size (pts)</label>
                      <input id="bulkqrSize" type="number" min="40" max="360" value="120" />
                    </div>
                    <div>
                      <label for="bulkqrMargin">Margin (pts)</label>
                      <input id="bulkqrMargin" type="number" min="0" max="100" value="24" />
                    </div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="bulkqrRunBtn" class="btn btn-secondary" type="button">Run Batch</button>
                    <button id="bulkqrDownloadBtn" class="btn" type="button" disabled>Download ZIP</button>
                  </div>
                  <div id="bulkqrStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Log</div></div>
                <textarea id="bulkqrLog" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="webhooksend">
          <div class="tool-header">
            <div>
              <h2>Webhook Send</h2>
              <p>Send a file to a webhook URL (multipart/form-data) with basic metadata (v1). Client-side.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="webhookFile">File</label>
                  <input id="webhookFile" type="file" />
                  <label for="webhookUrl" style="margin-top:10px;">Webhook URL</label>
                  <input id="webhookUrl" type="text" placeholder="https://example.com/webhook" />
                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="webhookSendBtn" class="btn btn-secondary" type="button">Send</button>
                  </div>
                  <div id="webhookStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Response</div></div>
                <textarea id="webhookOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdfperms">
          <div class="tool-header">
            <div>
              <h2>PDF Permissions Report</h2>
              <p>Best-effort report of encryption + permission flags (v1 via PDF.js). Client-side.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdfpermsFile">PDF file</label>
                  <input id="pdfpermsFile" type="file" accept="application/pdf" />
                  <label for="pdfpermsPassword" style="margin-top:10px;">Password (if needed)</label>
                  <input id="pdfpermsPassword" type="password" placeholder="optional" />
                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="pdfpermsRunBtn" class="btn btn-secondary" type="button">Generate Report</button>
                    <button id="pdfpermsDownloadBtn" class="btn" type="button" disabled>Download .txt</button>
                  </div>
                  <div id="pdfpermsStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Report</div></div>
                <textarea id="pdfpermsOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_PACK11_TOOLVIEWS_V1 -->

        <!-- PDFREALM_PACK12_TOOLVIEWS_V1 -->
        <div class="tool-view" data-tool-view="pdf2xlsx">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí XLSX</h2>
              <p>v1 export: page + line text into an Excel sheet (scans need OCR first).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdf2xlsxFile">PDF file</label>
                  <input id="pdf2xlsxFile" type="file" accept="application/pdf" />
                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="pdf2xlsxRunBtn" class="btn btn-secondary" type="button">Convert</button>
                    <button id="pdf2xlsxDownloadBtn" class="btn" type="button" disabled>Download .xlsx</button>
                  </div>
                  <div id="pdf2xlsxStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Preview (first rows)</div></div>
                <textarea id="pdf2xlsxOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdfcrop">
          <div class="tool-header">
            <div>
              <h2>Crop PDF</h2>
              <p>Crop margins on every page (v1). This sets the page CropBox.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="pdfcropFile">PDF file</label>
                  <input id="pdfcropFile" type="file" accept="application/pdf" />

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="pdfcropUnits">Units</label>
                      <select id="pdfcropUnits">
                        <option value="pt">Points</option>
                        <option value="in">Inches</option>
                      </select>
                    </div>
                    <div>
                      <label for="pdfcropApplyTo">Apply to</label>
                      <select id="pdfcropApplyTo">
                        <option value="all">All pages</option>
                      </select>
                    </div>
                  </div>

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="pdfcropLeft">Left</label><input id="pdfcropLeft" type="number" value="0" /></div>
                    <div><label for="pdfcropRight">Right</label><input id="pdfcropRight" type="number" value="0" /></div>
                  </div>
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="pdfcropTop">Top</label><input id="pdfcropTop" type="number" value="0" /></div>
                    <div><label for="pdfcropBottom">Bottom</label><input id="pdfcropBottom" type="number" value="0" /></div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="pdfcropRunBtn" class="btn btn-secondary" type="button">Crop</button>
                    <button id="pdfcropDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="pdfcropStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="pdfcropPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="datestamp">
          <div class="tool-header">
            <div>
              <h2>Date/Time Stamp</h2>
              <p>Stamp a date/time string on every page (v1). Great for audit trails.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="datestampFile">PDF file</label>
                  <input id="datestampFile" type="file" accept="application/pdf" />
                  <label for="datestampText" style="margin-top:10px;">Text</label>
                  <input id="datestampText" type="text" placeholder="Defaults to current date/time" />

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="datestampPos">Position</label>
                      <select id="datestampPos">
                        <option value="br">Bottom-right</option>
                        <option value="bl">Bottom-left</option>
                        <option value="tr">Top-right</option>
                        <option value="tl">Top-left</option>
                        <option value="c">Center</option>
                      </select>
                    </div>
                    <div>
                      <label for="datestampFontSize">Font size</label>
                      <input id="datestampFontSize" type="number" min="6" max="40" value="10" />
                    </div>
                  </div>

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="datestampMargin">Margin (pt)</label>
                      <input id="datestampMargin" type="number" min="0" max="120" value="24" />
                    </div>
                    <div>
                      <label for="datestampOpacity">Opacity</label>
                      <input id="datestampOpacity" type="number" min="0.1" max="1" step="0.1" value="0.7" />
                    </div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="datestampRunBtn" class="btn btn-secondary" type="button">Stamp</button>
                    <button id="datestampDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="datestampStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="datestampPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="tableextract">
          <div class="tool-header">
            <div>
              <h2>Table Extractor</h2>
              <p>Best-effort table-like extraction (v1 heuristic). Outputs CSV.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="tableextractFile">PDF file</label>
                  <input id="tableextractFile" type="file" accept="application/pdf" />
                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="tableextractRunBtn" class="btn btn-secondary" type="button">Extract</button>
                    <button id="tableextractDownloadBtn" class="btn" type="button" disabled>Download .csv</button>
                  </div>
                  <div id="tableextractStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Output</div></div>
                <textarea id="tableextractOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="chainrunner">
          <div class="tool-header">
            <div>
              <h2>Chain Runner</h2>
              <p>Batch pipeline: Crop + Date Stamp on multiple PDFs, then download a ZIP of results (v1).</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="chainrunnerFiles">PDF files</label>
                  <input id="chainrunnerFiles" type="file" accept="application/pdf" multiple />

                  <div style="margin-top:10px;font-weight:600;">Steps</div>
                  <label style="display:flex;gap:10px;align-items:center;margin-top:8px;">
                    <input id="chainrunnerDoCrop" type="checkbox" checked />
                    <span>Crop margins</span>
                  </label>
                  <label style="display:flex;gap:10px;align-items:center;margin-top:6px;">
                    <input id="chainrunnerDoStamp" type="checkbox" checked />
                    <span>Date/Time stamp</span>
                  </label>

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div>
                      <label for="chainrunnerUnits">Crop units</label>
                      <select id="chainrunnerUnits">
                        <option value="pt">Points</option>
                        <option value="in">Inches</option>
                      </select>
                    </div>
                    <div>
                      <label for="chainrunnerPos">Stamp position</label>
                      <select id="chainrunnerPos">
                        <option value="br">Bottom-right</option>
                        <option value="bl">Bottom-left</option>
                        <option value="tr">Top-right</option>
                        <option value="tl">Top-left</option>
                      </select>
                    </div>
                  </div>

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="chainrunnerLeft">Left</label><input id="chainrunnerLeft" type="number" value="0" /></div>
                    <div><label for="chainrunnerRight">Right</label><input id="chainrunnerRight" type="number" value="0" /></div>
                  </div>
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="chainrunnerTop">Top</label><input id="chainrunnerTop" type="number" value="0" /></div>
                    <div><label for="chainrunnerBottom">Bottom</label><input id="chainrunnerBottom" type="number" value="0" /></div>
                  </div>

                  <label for="chainrunnerText" style="margin-top:10px;">Stamp text (optional)</label>
                  <input id="chainrunnerText" type="text" placeholder="Defaults to current date/time" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="chainrunnerRunBtn" class="btn btn-secondary" type="button">Run Batch</button>
                    <button id="chainrunnerDownloadBtn" class="btn" type="button" disabled>Download ZIP</button>
                  </div>

                  <div id="chainrunnerStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Log</div></div>
                <textarea id="chainrunnerLog" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_PACK12_TOOLVIEWS_V1 -->

        <!-- PDFREALM_PACK13_TOOLVIEWS_V1 -->
        <div class="tool-view" data-tool-view="watermarktext">
          <div class="tool-header">
            <div>
              <h2>Watermark (Text)</h2>
              <p>Stamp a diagonal text watermark on every page (client-side).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="wmTextFile">PDF file</label>
                  <input id="wmTextFile" type="file" accept="application/pdf" />

                  <label for="wmTextValue" style="margin-top:10px;">Watermark text</label>
                  <input id="wmTextValue" type="text" value="CONFIDENTIAL" />

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="wmTextSize">Font size</label><input id="wmTextSize" type="number" min="8" max="160" value="48" /></div>
                    <div><label for="wmTextOpacity">Opacity</label><input id="wmTextOpacity" type="number" min="0.05" max="1" step="0.05" value="0.2" /></div>
                  </div>
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="wmTextAngle">Angle (deg)</label><input id="wmTextAngle" type="number" min="-90" max="90" value="-35" /></div>
                    <div><label for="wmTextRepeat">Repeat</label>
                      <select id="wmTextRepeat">
                        <option value="single">Single (center)</option>
                        <option value="tile">Tiled</option>
                      </select>
                    </div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="wmTextRunBtn" class="btn btn-secondary" type="button">Apply</button>
                    <button id="wmTextDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="wmTextStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="wmTextPreview" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="watermarkimage">
          <div class="tool-header">
            <div>
              <h2>Watermark (Image)</h2>
              <p>Stamp an image watermark (PNG/JPG) on every page (client-side).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="wmImgPdf">PDF file</label>
                  <input id="wmImgPdf" type="file" accept="application/pdf" />
                  <label for="wmImgFile" style="margin-top:10px;">Watermark image</label>
                  <input id="wmImgFile" type="file" accept="image/png,image/jpeg" />

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="wmImgPos">Position</label>
                      <select id="wmImgPos">
                        <option value="br">Bottom-right</option>
                        <option value="bl">Bottom-left</option>
                        <option value="tr">Top-right</option>
                        <option value="tl">Top-left</option>
                        <option value="c">Center</option>
                      </select>
                    </div>
                    <div><label for="wmImgScale">Scale</label><input id="wmImgScale" type="number" min="0.05" max="2" step="0.05" value="0.25" /></div>
                  </div>
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="wmImgMargin">Margin (pt)</label><input id="wmImgMargin" type="number" min="0" max="200" value="24" /></div>
                    <div><label for="wmImgOpacity">Opacity</label><input id="wmImgOpacity" type="number" min="0.05" max="1" step="0.05" value="0.35" /></div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="wmImgRunBtn" class="btn btn-secondary" type="button">Apply</button>
                    <button id="wmImgDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="wmImgStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="wmImgPreview" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="headerfooter">
          <div class="tool-header">
            <div>
              <h2>Header / Footer</h2>
              <p>Add a header and/or footer to every page. Use {page} and {pages} tokens.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="hfFile">PDF file</label>
                  <input id="hfFile" type="file" accept="application/pdf" />

                  <label for="hfHeader" style="margin-top:10px;">Header text</label>
                  <input id="hfHeader" type="text" placeholder="e.g. My Company ‚Äî {page}/{pages}" />
                  <label for="hfFooter" style="margin-top:10px;">Footer text</label>
                  <input id="hfFooter" type="text" placeholder="e.g. Generated {page}/{pages}" />

                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="hfAlign">Align</label>
                      <select id="hfAlign">
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div><label for="hfFontSize">Font size</label><input id="hfFontSize" type="number" min="6" max="24" value="10" /></div>
                  </div>
                  <div class="grid2" style="gap:10px;margin-top:10px;">
                    <div><label for="hfMargin">Margin (pt)</label><input id="hfMargin" type="number" min="0" max="120" value="24" /></div>
                    <div><label for="hfOpacity">Opacity</label><input id="hfOpacity" type="number" min="0.1" max="1" step="0.1" value="0.8" /></div>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="hfRunBtn" class="btn btn-secondary" type="button">Apply</button>
                    <button id="hfDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="hfStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="hfPreview" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="rotate90">
          <div class="tool-header">
            <div>
              <h2>Rotate 90¬∞</h2>
              <p>Rotate all pages in 90¬∞ increments only.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="rotFile">PDF file</label>
                  <input id="rotFile" type="file" accept="application/pdf" />

                  <label for="rotDir" style="margin-top:10px;">Rotation</label>
                  <select id="rotDir">
                    <option value="90">Clockwise 90¬∞</option>
                    <option value="-90">Counterclockwise 90¬∞</option>
                    <option value="180">180¬∞</option>
                  </select>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="rotRunBtn" class="btn btn-secondary" type="button">Rotate</button>
                    <button id="rotDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="rotStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="rotPreview" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="flattenforms">
          <div class="tool-header">
            <div>
              <h2>Flatten Forms</h2>
              <p>Make form fields uneditable by flattening AcroForm fields (client-side).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="flatFile">PDF file</label>
                  <input id="flatFile" type="file" accept="application/pdf" />

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="flatRunBtn" class="btn btn-secondary" type="button">Flatten</button>
                    <button id="flatDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>
                  <div id="flatStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>
              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="flatPreview" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_PACK13_TOOLVIEWS_V1 -->


<div class="tool-view" data-tool-view="docgov">
  <div class="tool-head">
    <div>
      <h1 style="margin:0;">Document Governance</h1>
      <div style="color:var(--muted); margin-top:6px;">Approvals, policy locks, audit trails, and constitution-style control (suite hub).</div>
    </div>
  </div>

  <div class="tool-body">
    <div class="card">
      <h3 style="margin:0 0 10px 0;">Governance Suite Hub</h3>
      <div style="color:var(--muted); line-height:1.6;">
        ‚Ä¢ Constitution / M-of-N approvals (threshold governance)<br/>
        ‚Ä¢ Change proposals + quorum sessions<br/>
        ‚Ä¢ Audit logs + evidence bundles + verification flows
      </div>
      <div style="height:1px; background: rgba(255,255,255,0.10); margin: 14px 0;"></div>
      <div style="color:var(--muted); font-size:0.95rem;">Wiring comes next (policies, approvals, and evidence bundles).</div>
    </div>
  </div>
</div>


</section>
    
        <!-- PDFREALM_PACK14_TOOLVIEWS_V1 -->
        <div class="tool-view" data-tool-view="pdfflatten">
          <div class="tool-header">
            <div>
              <h2>Flatten Forms</h2>
              <p>Make PDF form fields uneditable (best-effort). If the PDF is encrypted, decrypt it first.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="pdfflattenFile">PDF file</label>
                <input id="pdfflattenFile" type="file" accept="application/pdf" />
                <div class="tool-actions" style="margin-top:12px;">
                  <button id="pdfflattenRunBtn" class="btn btn-secondary" type="button">Flatten</button>
                  <button id="pdfflattenDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                </div>
                <div id="pdfflattenStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="pdfflattenPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2layoutjson">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí Layout JSON</h2>
              <p>Extract text items with coordinates (x,y,width,height) per page (best-effort via PDF.js).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="pdf2layoutjsonFile">PDF file</label>
                <input id="pdf2layoutjsonFile" type="file" accept="application/pdf" />
                <div class="tool-actions" style="margin-top:12px;">
                  <button id="pdf2layoutjsonRunBtn" class="btn btn-secondary" type="button">Extract</button>
                  <button id="pdf2layoutjsonDownloadBtn" class="btn" type="button" disabled>Download .json</button>
                </div>
                <div id="pdf2layoutjsonStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Output</div></div>
                <textarea id="pdf2layoutjsonOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="qrstamp">
          <div class="tool-header">
            <div>
              <h2>Add QR Code</h2>
              <p>Stamp a QR code onto a PDF (first page or all pages). Client-side.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="qrstampFile">PDF file</label>
                <input id="qrstampFile" type="file" accept="application/pdf" />
                <label for="qrstampText" style="margin-top:10px;">QR content (URL/text)</label>
                <input id="qrstampText" type="text" placeholder="https://example.com" />
                <div class="grid2" style="margin-top:10px;">
                  <div>
                    <label for="qrstampSize">Size (px)</label>
                    <input id="qrstampSize" type="number" min="60" max="600" value="140" />
                  </div>
                  <div>
                    <label for="qrstampPages">Pages</label>
                    <select id="qrstampPages">
                      <option value="first">First page</option>
                      <option value="all">All pages</option>
                    </select>
                  </div>
                </div>
                <label for="qrstampPos" style="margin-top:10px;">Position</label>
                <select id="qrstampPos">
                  <option value="br">Bottom-right</option>
                  <option value="bl">Bottom-left</option>
                  <option value="tr">Top-right</option>
                  <option value="tl">Top-left</option>
                </select>

                <div class="tool-actions" style="margin-top:12px;">
                  <button id="qrstampRunBtn" class="btn btn-secondary" type="button">Apply</button>
                  <button id="qrstampDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                </div>
                <div id="qrstampStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="qrstampPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="barcodestamp">
          <div class="tool-header">
            <div>
              <h2>Add Barcode (CODE128)</h2>
              <p>Stamp a barcode onto a PDF (first page or all pages). Client-side.</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="barcodestampFile">PDF file</label>
                <input id="barcodestampFile" type="file" accept="application/pdf" />
                <label for="barcodestampText" style="margin-top:10px;">Barcode value</label>
                <input id="barcodestampText" type="text" placeholder="ABC123456" />
                <div class="grid2" style="margin-top:10px;">
                  <div>
                    <label for="barcodestampHeight">Height (px)</label>
                    <input id="barcodestampHeight" type="number" min="30" max="300" value="80" />
                  </div>
                  <div>
                    <label for="barcodestampPages">Pages</label>
                    <select id="barcodestampPages">
                      <option value="first">First page</option>
                      <option value="all">All pages</option>
                    </select>
                  </div>
                </div>
                <label for="barcodestampPos" style="margin-top:10px;">Position</label>
                <select id="barcodestampPos">
                  <option value="br">Bottom-right</option>
                  <option value="bl">Bottom-left</option>
                  <option value="tr">Top-right</option>
                  <option value="tl">Top-left</option>
                </select>

                <div class="tool-actions" style="margin-top:12px;">
                  <button id="barcodestampRunBtn" class="btn btn-secondary" type="button">Apply</button>
                  <button id="barcodestampDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                </div>
                <div id="barcodestampStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top"><div class="viewer-title">Preview</div></div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="barcodestampPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tool-view" data-tool-view="pdf2outline">
          <div class="tool-header">
            <div>
              <h2>PDF ‚Üí Outline</h2>
              <p>Extract bookmarks / outline to JSON (best-effort via PDF.js).</p>
            </div>
          </div>
          <div class="tool-body">
            <div class="grid2">
              <div class="card">
                <label for="pdf2outlineFile">PDF file</label>
                <input id="pdf2outlineFile" type="file" accept="application/pdf" />
                <div class="tool-actions" style="margin-top:12px;">
                  <button id="pdf2outlineRunBtn" class="btn btn-secondary" type="button">Extract</button>
                  <button id="pdf2outlineDownloadBtn" class="btn" type="button" disabled>Download .json</button>
                </div>
                <div id="pdf2outlineStatus" class="muted" style="margin-top:10px;"></div>
              </div>

              <div class="card">
                <div class="viewer-top"><div class="viewer-title">Output</div></div>
                <textarea id="pdf2outlineOut" rows="18" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_PACK14_TOOLVIEWS_V1 -->

        <!-- PDFREALM_CODE2PDF_TOOLVIEW_V1 -->
        <div class="tool-view" data-tool-view="code2pdf">
          <div class="tool-header">
            <div>
              <h2>Code ‚Üí PDF</h2>
              <p>Convert source code and text-like files into a clean, monospaced PDF with optional line numbers. Runs client-side.</p>
            </div>
          </div>

          <div class="tool-body">
            <div class="grid2">
              <div style="display:flex;flex-direction:column;gap:14px;">
                <div class="card">
                  <label for="code2pdfFile">Code / Text file</label>
                  <input id="code2pdfFile" type="file"
                    accept=".js,.ts,.jsx,.tsx,.py,.go,.java,.c,.cpp,.h,.hpp,.rs,.sh,.ps1,.rb,.php,.sql,.yaml,.yml,.toml,.ini,.env,.log,.txt,.md,.json,.xml,.html,.css,text/plain,application/json,text/x-python,text/x-shellscript" />

                  <div style="display:flex;flex-wrap:wrap;gap:10px;margin-top:12px;align-items:center;">
                    <label style="display:flex;gap:8px;align-items:center;">
                      <input id="code2pdfLineNums" type="checkbox" checked />
                      <span class="muted">Line numbers</span>
                    </label>

                    <label style="display:flex;gap:8px;align-items:center;">
                      <span class="muted">Page</span>
                      <select id="code2pdfPageSize">
                        <option value="letter" selected>Letter</option>
                        <option value="a4">A4</option>
                      </select>
                    </label>

                    <label style="display:flex;gap:8px;align-items:center;">
                      <span class="muted">Font</span>
                      <input id="code2pdfFontSize" type="number" min="8" max="16" value="10" style="width:72px;" />
                    </label>
                  </div>

                  <div class="tool-actions" style="margin-top:12px;">
                    <button id="code2pdfBuildBtn" class="btn btn-secondary" type="button">Build PDF</button>
                    <button id="code2pdfDownloadBtn" class="btn" type="button" disabled>Download PDF</button>
                  </div>

                  <div id="code2pdfStatus" class="muted" style="margin-top:10px;"></div>
                </div>
              </div>

              <div class="card viewer-card">
                <div class="viewer-top">
                  <div class="viewer-title">Preview</div>
                </div>
                <div class="viewer-wrapper" style="position:relative;overflow:hidden;">
                  <iframe id="code2pdfPreviewFrame" style="width:100%;height:560px;border:0;border-radius:12px;background:#0b1220;"></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /PDFREALM_CODE2PDF_TOOLVIEW_V1 -->

</main>

    <footer class="footer">
      <div>¬© <span id="year"></span> PDFRealm. All rights reserved.</div>
    </footer>

    <!-- Welcome / Pricing Popout Modal -->
    <div id="welcomeModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-card" style="max-width: 820px;">
        <div class="modal-head">
          <div class="mh">Welcome to PDFRealm</div>
          <div style="display:flex; gap:10px; align-items:center;">
            <button id="welcomeModalDontShow" class="btn btn-secondary" type="button">Don‚Äôt show again</button>
            <button id="welcomeModalClose" class="btn btn-secondary" type="button">Continue</button>
          </div>
        </div>
        <div class="modal-body">
          <div class="card" style="margin-top:0;">
            <div style="font-weight:800; font-size:1.05rem; margin-bottom:6px;">No account required</div>
            <div style="color:var(--muted); line-height:1.45;">
              <b>PDF Editor</b> and all <b>Quick Tools</b> work without an account. Upload, preview, and export instantly.
            </div>
          </div>

          <div style="display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; margin-top: 12px;">
            <div class="card">
              <div style="font-weight:800; font-size:1.05rem;">Quick Tools</div>
              <div style="color:var(--muted); margin-top:6px;">Unlimited Quick Tools</div>
              <div style="margin-top:10px; font-weight:900; font-size:1.35rem;">$14.99<span style="font-size:0.9rem; font-weight:700; color:var(--muted);">/mo</span></div>
              <div style="color:var(--muted); margin-top:8px; font-size:0.92rem;">Best for everyday conversions and edits.</div>
            </div>

            <div class="card" style="border-color: rgba(96, 165, 250, 0.35);">
              <div style="font-weight:800; font-size:1.05rem;">Pro</div>
              <div style="color:var(--muted); margin-top:6px;">AI Operator + Quick Tools + Secure Suite</div>
              <div style="margin-top:10px; font-weight:900; font-size:1.35rem;">$24.99<span style="font-size:0.9rem; font-weight:700; color:var(--muted);">/mo</span></div>
              <div style="color:var(--muted); margin-top:8px; font-size:0.92rem;">Automation + secure workflows.</div>
            </div>

            <div class="card">
              <div style="font-weight:800; font-size:1.05rem;">Full Suite</div>
              <div style="color:var(--muted); margin-top:6px;">Vault (100GB) + DocForge + All features</div>
              <div style="margin-top:10px; font-weight:900; font-size:1.35rem;">$39.99<span style="font-size:0.9rem; font-weight:700; color:var(--muted);">/mo</span></div>
              <div style="color:var(--muted); margin-top:8px; font-size:0.92rem;">Storage + templates + everything.</div>
            </div>
          </div>

          <div class="muted" style="margin-top:12px; font-size:0.92rem;">
            Tip: You can start using tools immediately ‚Äî upgrade anytime when you want unlimited access or advanced features.
          </div>
        </div>
      </div>
    </div>

    <!-- Account Modal -->
    <div id="accountModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-card">
        <div class="modal-head">
          <div class="mh">Account</div>
          <button id="accountModalClose" class="btn btn-secondary" type="button">Close</button>
        </div>
        <div class="modal-body">
          <div class="card">
            <label for="loginEmail">Email</label>
            <input id="loginEmail" type="email" placeholder="you@example.com" />
            <label for="loginPassword">Password</label>
            <input id="loginPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            <div class="modal-row">
              <button id="loginSubmitBtn" class="btn btn-primary" type="button">Login</button>
              <button id="subscribeMonthlyBtn" class="btn btn-secondary" type="button">Subscribe (stub)</button>
              <button id="subscribeYearlyBtn" class="btn btn-secondary" type="button">Subscribe (stub)</button>
            </div>
            <div id="loginStatus" style="margin-top:10px; color: var(--muted); font-size: 0.95rem;"></div>
          </div>
        </div>
      </div>
    </div>

    <script src="secureAiRecorder.js" defer></script>

    <script src="/app.js" defer></script>
    <script src="evidence_ui.js"></script>
    <script src="court_verify_ui.js"></script>

    <script>
      (function () {
        var y = document.getElementById("year");
        if (y) y.textContent = new Date().getFullYear();
      })();
    </script>

    <!-- Welcome modal: show on entry -->
    <script>
      (function () {
        document.addEventListener("DOMContentLoaded", function () {
          var modalId = "welcomeModal";
          var closeBtn = document.getElementById("welcomeModalClose");
          var dontBtn = document.getElementById("welcomeModalDontShow");

          if (closeBtn) closeBtn.addEventListener("click", function () { try { closeModal(modalId); } catch (_) {} });
          if (dontBtn) dontBtn.addEventListener("click", function () {
            try { localStorage.setItem("pdfrealm_welcome_dismissed", "1"); } catch (_) {}
            try { closeModal(modalId); } catch (_) {}
          });

          var dismissed = false;
          try { dismissed = localStorage.getItem("pdfrealm_welcome_dismissed") === "1"; } catch (_) {}

          if (!dismissed) {
            try { openModal(modalId); } catch (_) {}
          }
        });
      })();
    </script>

    <!-- Industry Packs dropdown behavior (match pricing.html) -->
    <script>
      (function () {
        var wrap = document.getElementById("industryMenuWrap");
        var toggle = document.getElementById("industryToggle");
        if (!wrap || !toggle) return;

        toggle.addEventListener("click", function (e) {
          e.stopPropagation();
          wrap.classList.toggle("workspace-open");
        });

        document.addEventListener("click", function () {
          wrap.classList.remove("workspace-open");
        });
      })();
    </script>

    <!-- Pop-out viewer helper -->
    <script>
      (function () {
        // Auto-add Pop-out buttons to viewer-card previews (iframe/img/canvas)
        function ensurePopoutButtonFor(card, targetId) {
          if (!card || !targetId) return;
          try {
            if (card.querySelector('[data-popout="' + targetId + '"]')) return;

            var top = card.querySelector('.viewer-top');
            if (!top) return;

            var container = top.querySelector('.viewer-tools');
            if (!container) {
              // Prefer appending into an existing control row (e.g., Rotate/Delete), otherwise create viewer-tools
              var kids = top.children || [];
              if (kids.length >= 2 && kids[kids.length - 1] && kids[kids.length - 1].appendChild) {
                container = kids[kids.length - 1];
              } else {
                container = document.createElement('div');
                container.className = 'viewer-tools';
                top.appendChild(container);
              }
            }

            var b = document.createElement('button');
            b.className = 'btn btn-secondary';
            b.type = 'button';
            b.textContent = 'Pop-out';
            b.setAttribute('data-popout', targetId);
            container.appendChild(b);
          } catch (_) {}
        }

        function autoWirePopouts() {
          try {
            var cards = document.querySelectorAll('.viewer-card');
            cards.forEach(function (card) {
              // 1) iframe previews (Merge/Split/etc)
              var iframe = card.querySelector('iframe[id]');
              if (iframe && iframe.id) {
                ensurePopoutButtonFor(card, iframe.id);
                return;
              }

              // 2) image previews (Delete / Rotate)
              var img = card.querySelector('img[id]');
              if (img && img.id) {
                if (img.id === 'deletePreviewImg' || img.id === 'rotatePreviewImg') {
                  ensurePopoutButtonFor(card, img.id);
                }
                return;
              }

              // 3) composite canvas previews (Quick Sign / Redact)
              if (card.querySelector('#qsCanvasShell')) {
                ensurePopoutButtonFor(card, 'qsCanvasShell');
                return;
              }
              if (card.querySelector('#redactCanvasShell')) {
                ensurePopoutButtonFor(card, 'redactCanvasShell');
                return;
              }
            });
          } catch (e) {
            console.warn('[pdfrealm] popout auto-wire failed', e);
          }
        }

        function openBlankPopup() {
          try {
            var w = window.open('about:blank', '_blank');
            if (w) w.opener = null;
            return w;
          } catch (_) {
            return null;
          }
        }

        function openUrl(url) {
          if (!url) return null;
          try {
            var w = window.open(url, '_blank');
            if (w) w.opener = null;
            return w;
          } catch (_) {
            return null;
          }
        }

        function elementToPngBlob(el) {
          return new Promise(function (resolve, reject) {
            try {
              if (!el) throw new Error('Missing preview element.');

              // Direct canvas
              if (el.tagName === 'CANVAS') {
                el.toBlob(function (blob) {
                  if (blob) resolve(blob);
                  else reject(new Error('Failed to export canvas.'));
                }, 'image/png');
                return;
              }

              // Composite canvases inside a wrapper
              var canvases = Array.prototype.slice.call(el.querySelectorAll('canvas') || []);
              canvases = canvases.filter(function (c) {
                var id = String(c.id || '').toLowerCase();
                return id.indexOf('hit') === -1; // ignore hit/interaction canvas
              });

              if (!canvases.length) throw new Error('Nothing to pop out yet. Use Preview/Export first.');

              var base = canvases[0];
              var w = base.width || 1;
              var h = base.height || 1;
              canvases.forEach(function (c) {
                if ((c.width || 0) > w) w = c.width;
                if ((c.height || 0) > h) h = c.height;
              });

              var out = document.createElement('canvas');
              out.width = w;
              out.height = h;
              var ctx = out.getContext('2d');
              ctx.fillStyle = '#ffffff';
              ctx.fillRect(0, 0, w, h);

              canvases.forEach(function (c) {
                try { ctx.drawImage(c, 0, 0, w, h); } catch (_) {}
              });

              // Redact boxes overlay (DOM)
              var boxLayer = el.querySelector('#redactBoxLayer');
              if (boxLayer) {
                var boxes = boxLayer.querySelectorAll('.redact-box');
                ctx.fillStyle = '#000000';
                boxes.forEach(function (b) {
                  var left = parseFloat(b.style.left || '0');
                  var top = parseFloat(b.style.top || '0');
                  var bw = parseFloat(b.style.width || '0');
                  var bh = parseFloat(b.style.height || '0');
                  if (bw > 0 && bh > 0) ctx.fillRect(left, top, bw, bh);
                });
              }

              out.toBlob(function (blob) {
                if (blob) resolve(blob);
                else reject(new Error('Failed to export preview.'));
              }, 'image/png');
            } catch (e) {
              reject(e);
            }
          });
        }

        // Click handler for any [data-popout] button
        document.addEventListener('click', function (e) {
          var btn = e.target && e.target.closest ? e.target.closest('[data-popout]') : null;
          if (!btn) return;

          var id = btn.getAttribute('data-popout');
          var el = document.getElementById(id);
          if (!el) {
            alert('Missing preview: ' + id);
            return;
          }

          // iframe: open src
          if (el.tagName === 'IFRAME') {
            var src = el.getAttribute('src') || '';
            if (!src) return alert('Nothing to pop out yet. Use Preview/Export first.');
            var w = openUrl(src);
            if (!w) alert('Pop-up blocked. Please allow pop-ups for this site.');
            return;
          }

          // img: open src
          if (el.tagName === 'IMG') {
            var src2 = el.currentSrc || el.src || '';
            if (!src2) return alert('Nothing to pop out yet. Use Preview/Export first.');
            var w2 = openUrl(src2);
            if (!w2) alert('Pop-up blocked. Please allow pop-ups for this site.');
            return;
          }

          // canvas/wrapper: render to PNG and open
          var popup = openBlankPopup();
          if (popup && popup.document) {
            popup.document.title = 'Preview';
            popup.document.body.style.margin = '0';
            popup.document.body.style.background = '#0b1220';
            popup.document.body.innerHTML =
              '<div style="font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#e5e7eb;padding:18px;">Rendering preview‚Ä¶</div>';
          }

          elementToPngBlob(el).then(function (blob) {
            var url = URL.createObjectURL(blob);
            if (popup) {
              popup.location = url;
            } else {
              var w3 = openUrl(url);
              if (!w3) alert('Pop-up blocked. Please allow pop-ups for this site.');
            }
            setTimeout(function () { try { URL.revokeObjectURL(url); } catch (_) {} }, 60 * 1000);
          }).catch(function (err) {
            try { if (popup) popup.close(); } catch (_) {}
            alert(err && err.message ? err.message : 'Pop-out failed.');
          });
        });

        // Auto-wire Pop-out buttons on load
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', autoWirePopouts);
        } else {
          autoWirePopouts();
        }
      })();
    </script>
  <script>
  (function(){
    const frame = document.getElementById("psGuestFrame");
    const uploadBtn = document.getElementById("psHostUploadBtn");
    const addBtn = document.getElementById("psHostAddBtn");
    const exportBtn = document.getElementById("psHostExportBtn");
    const uploadInput = document.getElementById("psHostUploadInput");
    const addInput = document.getElementById("psHostAddInput");
    const statusEl = document.getElementById("psHostStatus");
    if (!frame || !uploadBtn || !addBtn || !exportBtn || !uploadInput || !addInput) return;

    let ready = false;
    const queue = [];
    const pending = new Map();

    function setStatus(t){
      if (statusEl) statusEl.textContent = t;
    }

    function post(msg){
      if (ready && frame.contentWindow) {
        frame.contentWindow.postMessage(msg, window.location.origin);
      } else {
        queue.push(msg);
      }
    }

    window.addEventListener("message", (ev) => {
      if (ev.origin !== window.location.origin) return;
      const d = ev.data || {};
      if (!d || typeof d !== "object") return;

      if (d.type === "PDFSTUDIO_READY") {
        ready = true;
        while (queue.length) {
          const m = queue.shift();
          try { frame.contentWindow && frame.contentWindow.postMessage(m, window.location.origin); } catch(e){}
        }
        return;
      }

      if (d.type === "PDFSTUDIO_EXPORT_RESULT" && d.nonce) {
        const cb = pending.get(d.nonce);
        if (cb) {
          pending.delete(d.nonce);
          cb(d);
        }
        return;
      }
    });

    uploadBtn.addEventListener("click", () => uploadInput.click());
    addBtn.addEventListener("click", () => addInput.click());

    uploadInput.addEventListener("change", async () => {
      const f = uploadInput.files && uploadInput.files[0];
      uploadInput.value = "";
      if (!f) return;
      try{
        setStatus("Status: Loading‚Ä¶");
        const ab = await f.arrayBuffer();
        post({ type: "PDFSTUDIO_OPEN_BYTES", filename: f.name || "document.pdf", bytes: ab });
        setStatus("Status: Ready");
      }catch(e){
        console.error(e);
        setStatus("Status: Error");
        alert(String(e && (e.message || e) || "Failed to load PDF."));
      }
    });

    addInput.addEventListener("change", async () => {
      const files = Array.from(addInput.files || []);
      addInput.value = "";
      if (!files.length) return;
      try{
        setStatus("Status: Combining‚Ä¶");
        const payload = [];
        for (const f of files){
          const ab = await f.arrayBuffer();
          payload.push({ name: f.name || "file.pdf", bytes: ab });
        }
        post({ type: "PDFSTUDIO_MERGE_FILES", files: payload });
        setStatus("Status: Ready");
      }catch(e){
        console.error(e);
        setStatus("Status: Error");
        alert(String(e && (e.message || e) || "Failed to combine PDFs."));
      }
    });

    exportBtn.addEventListener("click", async () => {
      try{
        setStatus("Status: Exporting‚Ä¶");
        const nonce = Math.random().toString(36).slice(2);
        const result = await new Promise((resolve, reject) => {
          pending.set(nonce, (d) => {
            if (!d.ok) return reject(new Error(d.error || "Export failed"));
            resolve(d);
          });
          post({ type: "PDFSTUDIO_EXPORT", nonce });
          setTimeout(() => {
            if (pending.has(nonce)) {
              pending.delete(nonce);
              reject(new Error("Export timed out."));
            }
          }, 45000);
        });

        const bytes = result.bytes;
        if (!bytes || !bytes.byteLength) throw new Error("Missing exported bytes.");
        const blob = new Blob([bytes], { type: "application/pdf" });
        const url = URL.createObjectURL(blob);

        const a = document.createElement("a");
        a.href = url;
        a.download = (result.filename || "export.pdf").replace(/[^a-z0-9_\-\.]/gi, "_");
        document.body.appendChild(a);
        a.click();
        a.remove();
        setTimeout(() => URL.revokeObjectURL(url), 5000);
        setStatus("Status: Ready");
      }catch(e){
        console.error(e);
        setStatus("Status: Error");
        alert(String(e && (e.message || e) || "Export failed."));
      }
    });
  })();
</script>

    <!-- Secure AI Notes Consent Modal -->
    <div id="secureAiConsentModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-card">
        <div class="modal-head">
          <div class="mh">AI Notes Consent</div>
          <button id="secureAiConsentClose" class="btn btn-secondary" type="button">Close</button>
        </div>
        <div class="modal-body">
          <p id="secureAiConsentText" style="margin-top:0;">
            This session will be recorded (audio only) and summarized into a PDF report. Do you consent?
          </p>

          <div class="card" style="margin-top:12px;">
            <div style="color:var(--muted); font-size:0.9rem;">
              A visible recording indicator will remain on-screen while recording is active. If you decline, recording will not start (or will stop).
            </div>
          </div>

          <div class="modal-row" style="margin-top:14px;">
            <button id="secureAiConsentAccept" class="btn btn-primary" type="button">Accept</button>
            <button id="secureAiConsentDecline" class="btn btn-secondary" type="button">Decline</button>
          </div>

          <div id="secureAiConsentStatus" style="margin-top:10px; color:var(--muted); font-size:0.9rem;"></div>
        </div>
      </div>
    </div>

  <!-- AI Operator (Plan -> Execute) -->
  <script src="ai_agent.js"></script>

</body>
</html>

<!-- PDFREALM_EXCEPTIONAL_UX_PACK_V1: marker -->
